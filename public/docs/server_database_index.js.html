<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>server/database/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Dark theme matching app style - carefully scoped to not break layout */
        html, body {
            background-color: #1a1a1a !important;
            color: #e0e0e0 !important;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
            overflow-x: hidden !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Ultra-thin scrollbar with gradient - all webkit browsers */
        ::-webkit-scrollbar {
            width: 5px;
            height: 5px;
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #60a5fa 0%, #a78bfa 100%);
            border-radius: 2px;
            border: 1px solid #1a1a1a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #93c5fd 0%, #c4b5fd 100%);
        }

        ::-webkit-scrollbar-corner {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-button {
            display: none;
            width: 0;
            height: 0;
        }

        /* Specific elements scrollbars */
        body::-webkit-scrollbar,
        nav::-webkit-scrollbar,
        #main::-webkit-scrollbar,
        .container-overview::-webkit-scrollbar,
        pre::-webkit-scrollbar {
            width: 5px;
            height: 5px;
            background: #1a1a1a;
        }

        body::-webkit-scrollbar-thumb,
        nav::-webkit-scrollbar-thumb,
        #main::-webkit-scrollbar-thumb,
        .container-overview::-webkit-scrollbar-thumb,
        pre::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #60a5fa 0%, #a78bfa 100%);
            border-radius: 2px;
            border: 1px solid #1a1a1a;
        }

        body::-webkit-scrollbar-thumb:hover,
        nav::-webkit-scrollbar-thumb:hover,
        #main::-webkit-scrollbar-thumb:hover,
        .container-overview::-webkit-scrollbar-thumb:hover,
        pre::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #93c5fd 0%, #c4b5fd 100%);
        }

        /* Navigation sidebar - remove padding and white borders */
        nav {
            background-color: #242424 !important;
            border-right: 1px solid #404040 !important;
            padding: 0 !important;
            margin: 0 !important;
            overflow-x: hidden !important;
        }

        /* Nav scrollbar - explicit override */
        nav::-webkit-scrollbar {
            width: 5px !important;
            height: 5px !important;
            background: #242424 !important;
        }

        nav::-webkit-scrollbar-track {
            background: #242424 !important;
        }

        nav::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #60a5fa 0%, #a78bfa 100%) !important;
            border-radius: 2px !important;
        }

        nav::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #93c5fd 0%, #c4b5fd 100%) !important;
        }

        nav h2, nav h3 {
            color: #e0e0e0 !important;
            border-bottom: 1px solid #404040 !important;
            padding: 10px 15px !important;
            margin: 0 !important;
            background-color: #242424 !important;
            font-size: 14px !important;
            font-weight: 600 !important;
        }

        nav h3 {
            font-size: 13px !important;
        }

        nav ul {
            padding: 0 !important;
            margin: 0 !important;
            background-color: #242424 !important;
        }

        nav ul li {
            list-style: none !important;
            margin: 0 !important;
            padding: 0 !important;
            background-color: #242424 !important;
        }

        nav ul li a {
            color: #c9d1d9 !important;
            display: block !important;
            padding: 8px 15px !important;
            white-space: nowrap !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            background-color: #242424 !important;
            margin: 0 !important;
            border: none !important;
            font-size: 14px !important;
        }

        nav ul li a:hover {
            color: #60a5fa !important;
            background-color: rgba(96, 165, 250, 0.1) !important;
        }

        /* Module links (direct children of nav > ul > li) */
        nav > ul > li > a {
            color: #60a5fa !important;
            font-weight: 600 !important;
            padding: 10px 15px !important;
            font-size: 14px !important;
            border-left: 3px solid #60a5fa !important;
            padding-left: 12px !important;
        }

        nav > ul > li > a:hover {
            background-color: rgba(96, 165, 250, 0.15) !important;
        }

        /* Sub-items (methods/functions) indented */
        nav ul.methods {
            padding-left: 15px !important;
        }

        nav ul.methods li a {
            color: #9ca3af !important;
            font-size: 13px !important;
            padding: 6px 15px !important;
            font-weight: 400 !important;
        }

        nav ul.methods li a:hover {
            color: #c9d1d9 !important;
        }

        nav > h2:first-child {
            font-size: 16px !important;
            font-weight: 700 !important;
            padding: 12px 15px !important;
        }

        /* Main content area - dark background */
        #main {
            background-color: #1a1a1a !important;
            padding: 20px !important;
        }

        /* Article and sections - ensure dark background */
        article, section, .container-overview, .description {
            background-color: #1a1a1a !important;
        }

        /* Images - style demo images */
        img {
            max-width: 100% !important;
            height: auto !important;
            border: 1px solid #404040 !important;
            border-radius: 8px !important;
            margin: 20px 0 !important;
        }

        /* Links */
        a {
            color: #60a5fa !important;
            text-decoration: none !important;
        }

        a:hover {
            color: #93c5fd !important;
            text-decoration: underline !important;
        }

        /* Headings */
        h1, h2, h3, h4, h5, h6 {
            color: #e0e0e0 !important;
            border-bottom-color: #404040 !important;
            background-color: transparent !important;
        }

        h4.name {
            background-color: #2a2a2a !important;
            border: 1px solid #404040 !important;
        }

        /* Code blocks */
        pre {
            background-color: #0d1117 !important;
            border: 1px solid #404040 !important;
        }

        pre code {
            background-color: transparent !important;
        }

        code {
            background-color: #2a2a2a !important;
            color: #e0e0e0 !important;
            padding: 2px 6px !important;
            border-radius: 3px !important;
        }

        /* Tables */
        table {
            border-color: #404040 !important;
            background-color: #1a1a1a !important;
        }

        table thead tr {
            background-color: #242424 !important;
        }

        table tbody tr {
            background-color: #1a1a1a !important;
        }

        table tbody tr:nth-child(even) {
            background-color: #1f1f1f !important;
        }

        table td, table th {
            border-color: #404040 !important;
            color: #e0e0e0 !important;
            background-color: transparent !important;
        }

        .params .name, .props .name {
            color: #10b981 !important;
            font-family: 'Courier New', monospace !important;
        }

        /* Descriptions and details */
        .description, .details, dt, dd, p, ul, ol, dl {
            color: #e0e0e0 !important;
            background-color: transparent !important;
        }

        /* Types */
        .type-signature {
            color: #a78bfa !important;
        }

        /* Source links */
        .details .details-item-container {
            border-left-color: #404040 !important;
        }

        /* Breadcrumbs */
        .page-title {
            color: #e0e0e0 !important;
        }

        /* Search */
        #nav-search {
            background-color: #2a2a2a !important;
            border: 1px solid #404040 !important;
            color: #e0e0e0 !important;
        }

        /* Mobile nav trigger */
        .navicon-button {
            background-color: #2a2a2a !important;
        }

        /* Footer */
        footer {
            background-color: #1a1a1a !important;
            color: #9ca3af !important;
            border-top: 1px solid #404040 !important;
            text-align: center !important;
            padding: 20px !important;
        }

        /* Remove horizontal scrollbar and white borders */
        * {
            box-sizing: border-box !important;
        }
    </style>
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h3>Home</h3><ul><li><a href="index.html">README</a></li></ul><h3>ShippingManager</h3><ul><li><a href="tutorial-03-discovered-formulars.html">Discovered Formulas</a></li><li><a href="https://shippingmanager-api-reference.pages.dev/" target="_blank" rel="noopener noreferrer">API Reference &#8599;</a></li></ul><h3>COPILOT Tutorials</h3><ul><li><a href="tutorial-01-installation-guide.html">Installation</a></li><li><a href="tutorial-02-build-guide.html">Build Guide</a></li><li><a href="tutorial-04-cheatsheet.html">Cheat-Sheet</a></li><li><a href="tutorial-05-beginners-guide.html">Beginners Guide</a></li></ul><h3>COPILOT DOCUMENTATION</h3><ul><li class="nav-list-toggle"><a>Classes</a><ul style="display: none;"><li><a href="module-core_debounced-api.DebouncedAPIManager.html">DebouncedAPIManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_debounced-api.DebouncedAPIManager.html#call">call</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.DebouncedAPIManager.html#cancelAll">cancelAll</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.DebouncedAPIManager.html#get">get</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.DebouncedAPIManager.html#register">register</a></li></ul></li><li><a href="module-server_chatbot-ChatBot.html">ChatBot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot-ChatBot.html#initialize">initialize</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot-ChatBot.html#processAllianceMessage">processAllianceMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot-ChatBot.html#processPrivateMessage">processPrivateMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot-ChatBot.html#setupScheduledTasks">setupScheduledTasks</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot-ChatBot.html#updateSettings">updateSettings</a></li></ul></li></ul></li><li class="nav-list-toggle"><a>Modules</a><ul style="display: none;"><li><a href="module-alliance-tabs.html">alliance-tabs</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.clearAllianceTabCache">clearAllianceTabCache</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.closeAllianceCoopOverlay">closeAllianceCoopOverlay</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.getCurrentTab">getCurrentTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.hideAllAllianceUI">hideAllAllianceUI</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.initAllianceTabs">initAllianceTabs</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.refreshCurrentTab">refreshCurrentTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.showAllAllianceUI">showAllAllianceUI</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.showAllianceCoopOverlay">showAllianceCoopOverlay</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.showAllianceDetailsModal">showAllianceDetailsModal</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.switchTab">switchTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#.updateCoopTabBadge">updateCoopTabBadge</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~acceptUserToAlliance">acceptUserToAlliance</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~appendSearchResults">appendSearchResults</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~attachAllianceClickHandlers">attachAllianceClickHandlers</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~attachApplicationButtonListeners">attachApplicationButtonListeners</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~attachSearchEventListeners">attachSearchEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~createAllianceRow">createAllianceRow</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~declineUserFromAlliance">declineUserFromAlliance</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchAllianceInfo">fetchAllianceInfo</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchAllianceInfoById">fetchAllianceInfoById</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchAllianceMembers">fetchAllianceMembers</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchAllianceMembersById">fetchAllianceMembersById</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchAllianceSettings">fetchAllianceSettings</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchHighScores">fetchHighScores</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchLeagueInfo">fetchLeagueInfo</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~fetchQueuePool">fetchQueuePool</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~generateAllianceInfoHTML">generateAllianceInfoHTML</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~handleJoinAllianceClick">handleJoinAllianceClick</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~leaveAlliance">leaveAlliance</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~loadTabContent">loadTabContent</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~loadWelcomeMessage">loadWelcomeMessage</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~normalizeColor">normalizeColor</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~performSearch">performSearch</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~refreshApplicationsQueue">refreshApplicationsQueue</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderAllianzTab">renderAllianzTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderCoopTab">renderCoopTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderHighScoreTab">renderHighScoreTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderLigaTab">renderLigaTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderManagementTab">renderManagementTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderMemberCard">renderMemberCard</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderSearchResults">renderSearchResults</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderSearchTab">renderSearchTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~renderSettingsTab">renderSettingsTab</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~saveWelcomeMessage">saveWelcomeMessage</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~sendWelcomeMessageToUser">sendWelcomeMessageToUser</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~showDonateDialog">showDonateDialog</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~showTextInputDialog">showTextInputDialog</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateAllianceSettings">updateAllianceSettings</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateManagementTabVisibility">updateManagementTabVisibility</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateTabVisibilityForAllianceMembers">updateTabVisibilityForAllianceMembers</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateTabVisibilityForNonMembers">updateTabVisibilityForNonMembers</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateUserRole">updateUserRole</a></li><li data-type='method' style='display: none;'><a href="module-alliance-tabs.html#~updateWelcomeMessageCharCount">updateWelcomeMessageCharCount</a></li></ul></li><li><a href="module-analytics.html">analytics</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-analytics.html#.initAnalytics">initAnalytics</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~addApiStatsTab">addApiStatsTab</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~buildPod2Html">buildPod2Html</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~checkAndBuildIndex">checkAndBuildIndex</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~clearPortDemandChart">clearPortDemandChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~closeSoldVesselPanel">closeSoldVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~destroyChart">destroyChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~exportAnalyticsData">exportAnalyticsData</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~formatChartPrice">formatChartPrice</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~formatCurrency">formatCurrency</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~formatPercent">formatPercent</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~getPortDemandChartOptions">getPortDemandChartOptions</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~handleRawTransactionSort">handleRawTransactionSort</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~handleRouteClick">handleRouteClick</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~handleSort">handleSort</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~handleVesselClick">handleVesselClick</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~initSortableHeaders">initSortableHeaders</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~isCacheValid">isCacheValid</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~lazyLoadPorts">lazyLoadPorts</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~lazyLoadRoutes">lazyLoadRoutes</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~lazyLoadVessels">lazyLoadVessels</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadAnalyticsData">loadAnalyticsData</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadApiStats">loadApiStats</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadGameLogData">loadGameLogData</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadMoreRawTransactions">loadMoreRawTransactions</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadPortDemandChart">loadPortDemandChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~loadRawTransactions">loadRawTransactions</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~populatePortDropdown">populatePortDropdown</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~populateTypeFilter">populateTypeFilter</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~preloadAllTabs">preloadAllTabs</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderApiStatsChart">renderApiStatsChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderApiStatsSummary">renderApiStatsSummary</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderApiStatsTable">renderApiStatsTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderBBLChart">renderBBLChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderBottomVesselsRevenueChart">renderBottomVesselsRevenueChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderExpenseTable">renderExpenseTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderGameLogChart">renderGameLogChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderGameLogDailyTable">renderGameLogDailyTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderGameLogInfo">renderGameLogInfo</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderGameLogTable">renderGameLogTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderPortDemandCharts">renderPortDemandCharts</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderQuickSummary">renderQuickSummary</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderRawTransactionsTable">renderRawTransactionsTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderRouteTable">renderRouteTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderSoldVesselHistory">renderSoldVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderSummary">renderSummary</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderTEUChart">renderTEUChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderTop10Routes">renderTop10Routes</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderTrendChart">renderTrendChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderVesselCharts">renderVesselCharts</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderVesselTable">renderVesselTable</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderVesselsCompositionChart">renderVesselsCompositionChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderVesselsRevenueChart">renderVesselsRevenueChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~renderVesselsUtilizationChart">renderVesselsUtilizationChart</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~setupApiStatsControls">setupApiStatsControls</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~setupRawTransactionsLazyLoading">setupRawTransactionsLazyLoading</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~showLookupEntryDetails">showLookupEntryDetails</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~showRouteVesselsInfoTooltip">showRouteVesselsInfoTooltip</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~showSoldVesselPanel">showSoldVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~sortData">sortData</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~switchTab">switchTab</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateFilterName">updateFilterName</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateLoadMoreButton">updateLoadMoreButton</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updatePortDemandStatus">updatePortDemandStatus</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updatePortVesselMetrics">updatePortVesselMetrics</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateRawSortIndicators">updateRawSortIndicators</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateRawTransactionCounts">updateRawTransactionCounts</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateRouteFilterIcons">updateRouteFilterIcons</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateSortIndicators">updateSortIndicators</a></li><li data-type='method' style='display: none;'><a href="module-analytics.html#~updateVesselFilterIcons">updateVesselFilterIcons</a></li></ul></li><li><a href="module-api.html">api</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api.html#.activateCampaign">activateCampaign</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.buildLookup">buildLookup</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.checkCompanyAge">checkCompanyAge</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.checkDevelMode">checkDevelMode</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.clearLookup">clearLookup</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.deleteAllLogs">deleteAllLogs</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.deleteChat">deleteChat</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.departAllVessels">departAllVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.departVessel">departVessel</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.departVessels">departVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.doWearMaintenanceBulk">doWearMaintenanceBulk</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.downloadLogbookExport">downloadLogbookExport</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchAcquirableVessels">fetchAcquirableVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchAllianceMembers">fetchAllianceMembers</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchAssignedPorts">fetchAssignedPorts</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchBunkerPrices">fetchBunkerPrices</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchCampaigns">fetchCampaigns</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchChat">fetchChat</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchContacts">fetchContacts</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchLogbookEntries">fetchLogbookEntries</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchLogbookFileSize">fetchLogbookFileSize</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchMessengerChats">fetchMessengerChats</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchMessengerMessages">fetchMessengerMessages</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchUserCompany">fetchUserCompany</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchUserSettings">fetchUserSettings</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.fetchVessels">fetchVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsAll">getAnalyticsAll</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsOverview">getAnalyticsOverview</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsRoutes">getAnalyticsRoutes</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsSummary">getAnalyticsSummary</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsTrend">getAnalyticsTrend</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getAnalyticsVessels">getAnalyticsVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getApiStats">getApiStats</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getApiStatsDates">getApiStatsDates</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getApiStatsHourly">getApiStatsHourly</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getCompanyNameCached">getCompanyNameCached</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupAll">getLookupAll</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupBreakdown">getLookupBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupBuildStatus">getLookupBuildStatus</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupDaily">getLookupDaily</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupDetails">getLookupDetails</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupEntries">getLookupEntries</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupInfo">getLookupInfo</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getLookupTotals">getLookupTotals</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getMaintenanceCost">getMaintenanceCost</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getPortDemandHistory">getPortDemandHistory</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getPortDemandLatest">getPortDemandLatest</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getPortDemandStatus">getPortDemandStatus</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getPortDemandTrends">getPortDemandTrends</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getRecentIpos">getRecentIpos</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getRouteVessels">getRouteVessels</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getStockFinanceOverview">getStockFinanceOverview</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getStockMarket">getStockMarket</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getStockPurchaseTimes">getStockPurchaseTimes</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionDaily">getTransactionDaily</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionData">getTransactionData</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionInfo">getTransactionInfo</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionList">getTransactionList</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionSummary">getTransactionSummary</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTransactionTypes">getTransactionTypes</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.increaseStockForSale">increaseStockForSale</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.markChatAsRead">markChatAsRead</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.purchaseCO2">purchaseCO2</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.purchaseFuel">purchaseFuel</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.purchaseStock">purchaseStock</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.purchaseVessel">purchaseVessel</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.rebuildLookup">rebuildLookup</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.searchUsers">searchUsers</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sellStock">sellStock</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendChatMessage">sendChatMessage</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendPrivateMessage">sendPrivateMessage</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.syncTransactions">syncTransactions</a></li><li data-type='method' style='display: none;'><a href="module-api.html#~verifyVesselPurchased">verifyVesselPurchased</a></li></ul></li><li><a href="module-app.html">app</a></li><li><a href="module-automation.html">automation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-automation.html#.initAutomation">initAutomation</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#.runAutomationChecks">runAutomationChecks</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#.triggerAutoRebuyChecks">triggerAutoRebuyChecks</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~calculateRemainingDemand">calculateRemainingDemand</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~checkAutoCampaignRenewal">checkAutoCampaignRenewal</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~checkAutoDepartAll">checkAutoDepartAll</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~checkAutoRebuyCO2">checkAutoRebuyCO2</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~checkAutoRebuyFuel">checkAutoRebuyFuel</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~getTotalCapacity">getTotalCapacity</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~performAutoRebuyCO2">performAutoRebuyCO2</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~performAutoRebuyFuel">performAutoRebuyFuel</a></li><li data-type='method' style='display: none;'><a href="module-automation.html#~updateAutoDepartLabel">updateAutoDepartLabel</a></li></ul></li><li><a href="module-badge-manager.html">badge-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.getBadgeCount">getBadgeCount</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.hideBadge">hideBadge</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.showBadge">showBadge</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.updateBadge">updateBadge</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.updateButtonState">updateButtonState</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.updateButtonTooltip">updateButtonTooltip</a></li><li data-type='method' style='display: none;'><a href="module-badge-manager.html#.updateButtonVisibility">updateButtonVisibility</a></li></ul></li><li><a href="module-broadcast.html">broadcast</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-broadcast.html#.initBroadcast">initBroadcast</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#.initBroadcastForManagement">initBroadcastForManagement</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~deleteTemplate">deleteTemplate</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~editTemplate">editTemplate</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~loadTemplates">loadTemplates</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~renderTemplateList">renderTemplateList</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~saveTemplate">saveTemplate</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~toggleTemplate">toggleTemplate</a></li><li data-type='method' style='display: none;'><a href="module-broadcast.html#~updateMessageCounter">updateMessageCounter</a></li></ul></li><li><a href="module-bunker-management.html">bunker-management</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.buyMaxCO2">buyMaxCO2</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.buyMaxFuel">buyMaxFuel</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.getCurrentBunkerState">getCurrentBunkerState</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.setCapacityFromBunkerUpdate">setCapacityFromBunkerUpdate</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.updateBunkerStatus">updateBunkerStatus</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.updateCurrentCO2">updateCurrentCO2</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.updateCurrentCash">updateCurrentCash</a></li><li data-type='method' style='display: none;'><a href="module-bunker-management.html#.updateCurrentFuel">updateCurrentFuel</a></li></ul></li><li><a href="module-changelog-popup.html">changelog-popup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-changelog-popup.html#.checkAndShowChangelog">checkAndShowChangelog</a></li><li data-type='method' style='display: none;'><a href="module-changelog-popup.html#.handleChangelogAcknowledged">handleChangelogAcknowledged</a></li><li data-type='method' style='display: none;'><a href="module-changelog-popup.html#.initChangelogPopup">initChangelogPopup</a></li><li data-type='method' style='display: none;'><a href="module-changelog-popup.html#~closeChangelogPopup">closeChangelogPopup</a></li><li data-type='method' style='display: none;'><a href="module-changelog-popup.html#~showChangelogPopup">showChangelogPopup</a></li></ul></li><li><a href="module-chat.html">chat</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-chat.html#.displayMessages">displayMessages</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.handleMessageInput">handleMessageInput</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.initWebSocket">initWebSocket</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.loadAllianceMembers">loadAllianceMembers</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.loadMessages">loadMessages</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.markAllianceChatAsRead">markAllianceChatAsRead</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.parseMessageWithMentions">parseMessageWithMentions</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.sendMessage">sendMessage</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#.setChatScrollListener">setChatScrollListener</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~attemptReconnect">attemptReconnect</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~displaySuggestions">displaySuggestions</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~formatLocalTime">formatLocalTime</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleAllianceChanged">handleAllianceChanged</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleAllianceIndexReady">handleAllianceIndexReady</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleAutoCoopComplete">handleAutoCoopComplete</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleAutoCoopNoTargets">handleAutoCoopNoTargets</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleAutopilotDepartStart">handleAutopilotDepartStart</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleBackendAutoRepairComplete">handleBackendAutoRepairComplete</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleBunkerUpdate">handleBunkerUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleCO2Purchased">handleCO2Purchased</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleCampaignsRenewed">handleCampaignsRenewed</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleCompanyTypeUpdate">handleCompanyTypeUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleCoopUpdate">handleCoopUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleDesktopNotification">handleDesktopNotification</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleDrydockCountUpdate">handleDrydockCountUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleFuelPurchased">handleFuelPurchased</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleGenericNotification">handleGenericNotification</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleHarborMapRefreshRequired">handleHarborMapRefreshRequired</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleHeaderDataUpdate">handleHeaderDataUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleHijackingUpdate">handleHijackingUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleIpoAlertUpdate">handleIpoAlertUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleMentionAutocomplete">handleMentionAutocomplete</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleMessengerUpdate">handleMessengerUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handlePriceAlert">handlePriceAlert</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handlePriceUpdate">handlePriceUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handlePurserPurchase">handlePurserPurchase</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handlePurserSell">handlePurserSell</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleRepairCountUpdate">handleRepairCountUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleStaffTrainingPointsUpdate">handleStaffTrainingPointsUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleStaffUpdate">handleStaffUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleUnreadMessagesUpdate">handleUnreadMessagesUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleUserActionNotification">handleUserActionNotification</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselCountUpdate">handleVesselCountUpdate</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsDepartBatch">handleVesselsDepartBatch</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsDepartComplete">handleVesselsDepartComplete</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsDeparted">handleVesselsDeparted</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsDrydocked">handleVesselsDrydocked</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsFailed">handleVesselsFailed</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~handleVesselsRepaired">handleVesselsRepaired</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~hideMemberSuggestions">hideMemberSuggestions</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~insertMention">insertMention</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~registerUsernameClickEvents">registerUsernameClickEvents</a></li><li data-type='method' style='display: none;'><a href="module-chat.html#~updateAllianceChatBadge">updateAllianceChatBadge</a></li></ul></li><li><a href="module-company-profile.html">company-profile</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-company-profile.html#.closeCompanyProfile">closeCompanyProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#.initCompanyProfile">initCompanyProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#.openCompanyProfile">openCompanyProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#.openPlayerProfile">openPlayerProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~addToContacts">addToContacts</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~adjustSalary">adjustSalary</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~attachAllianceClickListener">attachAllianceClickListener</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~attachSalaryButtonListeners">attachSalaryButtonListeners</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~attachStockActionListeners">attachStockActionListeners</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~buildAchievementsSection">buildAchievementsSection</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~buildSection">buildSection</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~buildStaffSection">buildStaffSection</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~dismissStaffPointsBanner">dismissStaffPointsBanner</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~formatLabel">formatLabel</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~formatMoraleLabel">formatMoraleLabel</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~formatPerkName">formatPerkName</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~formatValue">formatValue</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~generateMoraleSmiley">generateMoraleSmiley</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~loadAllianceDetails">loadAllianceDetails</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~loadCompanyProfile">loadCompanyProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~loadStaffData">loadStaffData</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~loadStockSection">loadStockSection</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~normalizeColor">normalizeColor</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~removeFromContacts">removeFromContacts</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~renderCompanyProfile">renderCompanyProfile</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~renderSearchResults">renderSearchResults</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~searchPlayers">searchPlayers</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~startStockSellTimer">startStockSellTimer</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~toggleAchievementsList">toggleAchievementsList</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~toggleStaffDetails">toggleStaffDetails</a></li><li data-type='method' style='display: none;'><a href="module-company-profile.html#~trainPerk">trainPerk</a></li></ul></li><li><a href="module-coop.html">coop</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-coop.html#.closeCoopOverlay">closeCoopOverlay</a></li><li data-type='method' style='display: none;'><a href="module-coop.html#.fetchCoopData">fetchCoopData</a></li><li data-type='method' style='display: none;'><a href="module-coop.html#.sendCoopMax">sendCoopMax</a></li><li data-type='method' style='display: none;'><a href="module-coop.html#.showCoopOverlay">showCoopOverlay</a></li><li data-type='method' style='display: none;'><a href="module-coop.html#.updateCoopBadge">updateCoopBadge</a></li><li data-type='method' style='display: none;'><a href="module-coop.html#~renderMemberCard">renderMemberCard</a></li></ul></li><li><a href="module-core_app-initializer.html">core/app-initializer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#.initializeApp">initializeApp</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~createAllianceChatHandler">createAllianceChatHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~createBuyVesselsHandler">createBuyVesselsHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~createDebouncedFunctions">createDebouncedFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~createForecastHandler">createForecastHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~createTestBrowserNotification">createTestBrowserNotification</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~exposeGlobalFunctions">exposeGlobalFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~formatNumberWithSeparator">formatNumberWithSeparator</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~initializeSettingsUI">initializeSettingsUI</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~loadInitialData">loadInitialData</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~loadPortsDataGlobal">loadPortsDataGlobal</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~loadUserSettings">loadUserSettings</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~registerAllEventListeners">registerAllEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~setCheckboxState">setCheckboxState</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~setCheckboxValue">setCheckboxValue</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~setFormattedInputValue">setFormattedInputValue</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~setInputValue">setInputValue</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~setSelectValue">setSelectValue</a></li><li data-type='method' style='display: none;'><a href="module-core_app-initializer.html#~toggleElementVisibility">toggleElementVisibility</a></li></ul></li><li><a href="module-core_auto-refresh.html">core/auto-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.getActiveIntervals">getActiveIntervals</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.initNotificationButtonUpdater">initNotificationButtonUpdater</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.initVersionChecker">initVersionChecker</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.initVisibilityHandler">initVisibilityHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.preloadAllImages">preloadAllImages</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.stopAllIntervals">stopAllIntervals</a></li><li data-type='method' style='display: none;'><a href="module-core_auto-refresh.html#.stopInterval">stopInterval</a></li></ul></li><li><a href="module-core_badge-cache.html">core/badge-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#.loadCache">loadCache</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#.saveBadgeCache">saveBadgeCache</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#.updateCoopDisplay">updateCoopDisplay</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadBunkerStatus">loadBunkerStatus</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadCampaignsBadge">loadCampaignsBadge</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadCoopData">loadCoopData</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadHijackingBadge">loadHijackingBadge</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadPrices">loadPrices</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadRepairBadges">loadRepairBadges</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadStockAndAnchor">loadStockAndAnchor</a></li><li data-type='method' style='display: none;'><a href="module-core_badge-cache.html#~loadVesselBadges">loadVesselBadges</a></li></ul></li><li><a href="module-core_debounced-api.html">core/debounced-api</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_debounced-api.html#.cancelAllDebouncedFunctions">cancelAllDebouncedFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.html#.cancelDebouncedFunction">cancelDebouncedFunction</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.html#.createDebouncedFunction">createDebouncedFunction</a></li><li data-type='method' style='display: none;'><a href="module-core_debounced-api.html#.isDebouncePending">isDebouncePending</a></li></ul></li><li><a href="module-core_event-registry.html">core/event-registry</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerAutoDepartSettingsListeners">registerAutoDepartSettingsListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerAutoPilotFeatureListeners">registerAutoPilotFeatureListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerAutoPilotListeners">registerAutoPilotListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerAutoRebuyCO2Listeners">registerAutoRebuyCO2Listeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerAutoRebuyFuelListeners">registerAutoRebuyFuelListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerBunkerListeners">registerBunkerListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerChatBotSettingsListeners">registerChatBotSettingsListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerChatEventListeners">registerChatEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerCustomCommandsListeners">registerCustomCommandsListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerDialogEventListeners">registerDialogEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerIntelligentRebuyListeners">registerIntelligentRebuyListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerMessengerEventListeners">registerMessengerEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerNotificationPermissionListener">registerNotificationPermissionListener</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerNumberFormatting">registerNumberFormatting</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerSectionToggle">registerSectionToggle</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerSettingsThresholdListeners">registerSettingsThresholdListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#.registerVesselCatalogEventListeners">registerVesselCatalogEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#~createCustomCommandElement">createCustomCommandElement</a></li><li data-type='method' style='display: none;'><a href="module-core_event-registry.html#~formatNumberWithSeparator">formatNumberWithSeparator</a></li></ul></li><li><a href="module-core_global-exports.html">core/global-exports</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportApiUrl">exportApiUrl</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportAutopilotFunctions">exportAutopilotFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportCacheKeys">exportCacheKeys</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportDebouncedFunctions">exportDebouncedFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportDebugMode">exportDebugMode</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportGlobals">exportGlobals</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportLogbookHandler">exportLogbookHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportOverlayFunctions">exportOverlayFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportSettingsHandler">exportSettingsHandler</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportStorageFunctions">exportStorageFunctions</a></li><li data-type='method' style='display: none;'><a href="module-core_global-exports.html#.exportVersionFunctions">exportVersionFunctions</a></li></ul></li><li><a href="module-core_logger.html">core/logger</a></li><li><a href="module-core_settings-sync.html">core/settings-sync</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#.handleSettingsUpdate">handleSettingsUpdate</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#.toggleAutoPilotAgentCheckboxes">toggleAutoPilotAgentCheckboxes</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~formatNumberWithSeparator">formatNumberWithSeparator</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateAutoPilotToggles">updateAutoPilotToggles</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateAutoRebuyCO2UI">updateAutoRebuyCO2UI</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateAutoRebuyFuelUI">updateAutoRebuyFuelUI</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateChatBotSettings">updateChatBotSettings</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateNotificationSettings">updateNotificationSettings</a></li><li data-type='method' style='display: none;'><a href="module-core_settings-sync.html#~updateThresholdInputs">updateThresholdInputs</a></li></ul></li><li><a href="module-core_storage-manager.html">core/storage-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.clearUserStorage">clearUserStorage</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.getStorage">getStorage</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.getUserStorageKey">getUserStorageKey</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.getUserStoragePrefix">getUserStoragePrefix</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.removeStorage">removeStorage</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.setStorage">setStorage</a></li><li data-type='method' style='display: none;'><a href="module-core_storage-manager.html#.setUserStoragePrefix">setUserStoragePrefix</a></li></ul></li><li><a href="module-core_websocket-client.html">core/websocket-client</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.getWebSocketState">getWebSocketState</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.incrementReconnectCounter">incrementReconnectCounter</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.initAutopilotControls">initAutopilotControls</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.loadAutopilotState">loadAutopilotState</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.resetReconnectCounter">resetReconnectCounter</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.triggerPriceAlertCheck">triggerPriceAlertCheck</a></li><li data-type='method' style='display: none;'><a href="module-core_websocket-client.html#.updateWebSocketState">updateWebSocketState</a></li></ul></li><li><a href="module-depart-manager.html">depart-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.closeDepartManager">closeDepartManager</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.initializeDepartManager">initializeDepartManager</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.openDepartManager">openDepartManager</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.refreshDepartManagerIfOpen">refreshDepartManagerIfOpen</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.toggleDepartManager">toggleDepartManager</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#.updateDepartManagerLockState">updateDepartManagerLockState</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~addMassMoorEventHandlers">addMassMoorEventHandlers</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~addVesselItemEventHandlers">addVesselItemEventHandlers</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~clearSearch">clearSearch</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~departSelectedVessels">departSelectedVessels</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~drag">drag</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~formatDuration">formatDuration</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~formatETA">formatETA</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~formatLoadingStatus">formatLoadingStatus</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~getLoadingStatus">getLoadingStatus</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~getPortDrydock">getPortDrydock</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~getStatusInfo">getStatusInfo</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~getVesselStatusText">getVesselStatusText</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~loadPortsData">loadPortsData</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~loadVesselsByStatus">loadVesselsByStatus</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~locateVesselOnMap">locateVesselOnMap</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~moorSelectedVessels">moorSelectedVessels</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~renderDrydockEnrouteItem">renderDrydockEnrouteItem</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~renderDrydockTab">renderDrydockTab</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~renderMassMoorTab">renderMassMoorTab</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~renderMassMoorVesselItem">renderMassMoorVesselItem</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~renderVesselItem">renderVesselItem</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~resumeSelectedVessels">resumeSelectedVessels</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~searchVesselsAcrossTabs">searchVesselsAcrossTabs</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~selectAllVessels">selectAllVessels</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~selectVesselRouteOnMap">selectVesselRouteOnMap</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~startDrag">startDrag</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~stopDrag">stopDrag</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~unselectAllVessels">unselectAllVessels</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateAnchorTabCount">updateAnchorTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateAtPortTabCount">updateAtPortTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateAtSeaTabCount">updateAtSeaTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateDepartButtonCount">updateDepartButtonCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateDryDockTabCount">updateDryDockTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateMassMoorButtonCounts">updateMassMoorButtonCounts</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateMoorResumeButtonCounts">updateMoorResumeButtonCounts</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateMoorTabCount">updateMoorTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updatePendingTabCount">updatePendingTabCount</a></li><li data-type='method' style='display: none;'><a href="module-depart-manager.html#~updateVesselMoorState">updateVesselMoorState</a></li></ul></li><li><a href="module-desktop-notification-templates.html">desktop-notification-templates</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.createDesktopNotification">createDesktopNotification</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.getDefaultEmoji">getDefaultEmoji</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.getNotificationTypes">getNotificationTypes</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.isValidNotificationType">isValidNotificationType</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.notifyAlert">notifyAlert</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.notifyError">notifyError</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.notifySuccess">notifySuccess</a></li><li data-type='method' style='display: none;'><a href="module-desktop-notification-templates.html#.notifyWarning">notifyWarning</a></li></ul></li><li><a href="module-event-info.html">event-info</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-event-info.html#.initEventInfo">initEventInfo</a></li><li data-type='method' style='display: none;'><a href="module-event-info.html#.openEventModal">openEventModal</a></li><li data-type='method' style='display: none;'><a href="module-event-info.html#.updateEventData">updateEventData</a></li><li data-type='method' style='display: none;'><a href="module-event-info.html#~startEventTimer">startEventTimer</a></li></ul></li><li><a href="module-forecast-calendar.html">forecast-calendar</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#.initForecastCalendar">initForecastCalendar</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#.updateEventDiscount">updateEventDiscount</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~createTableHTML">createTableHTML</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~getBrowserTimezone">getBrowserTimezone</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~getCo2Class">getCo2Class</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~getCurrentVisibleDay">getCurrentVisibleDay</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~getFuelClass">getFuelClass</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~isEventActiveAtTime">isEventActiveAtTime</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~isEventActiveOnDay">isEventActiveOnDay</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~loadForecastData">loadForecastData</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~preloadMonth">preloadMonth</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~renderBook">renderBook</a></li><li data-type='method' style='display: none;'><a href="module-forecast-calendar.html#~updateEventBadge">updateEventBadge</a></li></ul></li><li><a href="module-harbor-map-aggregator.html">harbor-map-aggregator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~aggregateReachablePorts">aggregateReachablePorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~aggregateVesselData">aggregateVesselData</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~categorizeVesselsByPort">categorizeVesselsByPort</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~extractPortsFromGameIndex">extractPortsFromGameIndex</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~extractVesselsFromGameIndex">extractVesselsFromGameIndex</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~filterAssignedPorts">filterAssignedPorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~formatPortAbbreviation">formatPortAbbreviation</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~groupVesselsByPortPair">groupVesselsByPortPair</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-aggregator.html#~hasOwnImage">hasOwnImage</a></li></ul></li><li><a href="module-harbor-map-calculator.html">harbor-map-calculator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map-calculator.html#~calculateCargoUtilization">calculateCargoUtilization</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-calculator.html#~calculateDemandLevel">calculateDemandLevel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-calculator.html#~calculateETA">calculateETA</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-calculator.html#~calculateVesselPosition">calculateVesselPosition</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-calculator.html#~formatCargoCapacity">formatCargoCapacity</a></li></ul></li><li><a href="module-harbor-map-init.html">harbor-map-init</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.closeHarborMap">closeHarborMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.forceRefreshMap">forceRefreshMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.initHarborMap">initHarborMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.openHarborMap">openHarborMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.preloadHarborMapData">preloadHarborMapData</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.refreshHarborMapIfOpen">refreshHarborMapIfOpen</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.reloadMap">reloadMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.startHarborMapAutoUpdate">startHarborMapAutoUpdate</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#.stopHarborMapAutoUpdate">stopHarborMapAutoUpdate</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#~departVesselWrapper">departVesselWrapper</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#~getVesselByIdWrapper">getVesselByIdWrapper</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#~selectVesselFromMap">selectVesselFromMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#~sellVesselFromPanelWrapper">sellVesselFromPanelWrapper</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map-init.html#~updateVesselMarkerWrapper">updateVesselMarkerWrapper</a></li></ul></li><li><a href="module-harbor-map_api-client.html">harbor-map/api-client</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.clearHarborMapCache">clearHarborMapCache</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.clearOverviewCache">clearOverviewCache</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.exportVesselHistory">exportVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.fetchHarborMapOverview">fetchHarborMapOverview</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.fetchPortDetails">fetchPortDetails</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.fetchVesselHistory">fetchVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.fetchVesselReachablePorts">fetchVesselReachablePorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.getCachedOverview">getCachedOverview</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.invalidateOverviewCache">invalidateOverviewCache</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_api-client.html#.prefetchHarborMapData">prefetchHarborMapData</a></li></ul></li><li><a href="module-harbor-map_filters.html">harbor-map/filters</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.applyDemandFilter">applyDemandFilter</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.calculatePortCurrentCargoDemand">calculatePortCurrentCargoDemand</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.calculatePortCurrentOilDemand">calculatePortCurrentOilDemand</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.calculatePortMaxCargoDemand">calculatePortMaxCargoDemand</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.calculatePortMaxOilDemand">calculatePortMaxOilDemand</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.filterPorts">filterPorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.filterPortsByPortPair">filterPortsByPortPair</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.filterVessels">filterVessels</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.filterVesselsByPortPair">filterVesselsByPortPair</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.getDemandFilterOptions">getDemandFilterOptions</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.getPortFilterOptions">getPortFilterOptions</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#.getVesselFilterOptions">getVesselFilterOptions</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_filters.html#~calculateVesselUtilization">calculateVesselUtilization</a></li></ul></li><li><a href="module-harbor-map_map-controller.html">harbor-map/map-controller</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.clearRoute">clearRoute</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.closeAllPanels">closeAllPanels</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.deselectAll">deselectAll</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.drawRoute">drawRoute</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.getCurrentPorts">getCurrentPorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.getMap">getMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.getOverviewData">getOverviewData</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.getSelectedPortCode">getSelectedPortCode</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.getVesselById">getVesselById</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.highlightPorts">highlightPorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.initMap">initMap</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.loadOverview">loadOverview</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.renderPorts">renderPorts</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.renderVessels">renderVessels</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.resetPortDisplay">resetPortDisplay</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.selectPort">selectPort</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.selectVessel">selectVessel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.setPortFilter">setPortFilter</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.setRouteFilter">setRouteFilter</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.setVesselFilter">setVesselFilter</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.updateVesselMarker">updateVesselMarker</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#.updateWeatherDataSetting">updateWeatherDataSetting</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~addCustomControls">addCustomControls</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~applyFilterModalSelections">applyFilterModalSelections</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~applyFiltersAndRender">applyFiltersAndRender</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~applyMapTheme">applyMapTheme</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~calculateHeading">calculateHeading</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~categorizeVesselsByPortClientSide">categorizeVesselsByPortClientSide</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~changeTileLayer">changeTileLayer</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~closeFilterModal">closeFilterModal</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~createVesselIcon">createVesselIcon</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~getVesselType">getVesselType</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~hideRouteVesselsPanel">hideRouteVesselsPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~initFilterModalDrag">initFilterModalDrag</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~onFilterModalDrag">onFilterModalDrag</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~onFilterModalDragEnd">onFilterModalDragEnd</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~openFilterModal">openFilterModal</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~populateFilterModalDropdowns">populateFilterModalDropdowns</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~resetAllFilters">resetAllFilters</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~showRouteVesselsPanel">showRouteVesselsPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~showWeatherInfo">showWeatherInfo</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~toggleWeatherLayer">toggleWeatherLayer</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~updateDemandFilterDropdowns">updateDemandFilterDropdowns</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_map-controller.html#~updateRouteDropdown">updateRouteDropdown</a></li></ul></li><li><a href="module-harbor-map_panel-drag.html">harbor-map/panel-drag</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_panel-drag.html#.initializePanelDrag">initializePanelDrag</a></li></ul></li><li><a href="module-harbor-map_port-panel.html">harbor-map/port-panel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#.closePortPanel">closePortPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#.fetchAndUpdatePortDemand">fetchAndUpdatePortDemand</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#.hidePortPanel">hidePortPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#.selectVesselFromPort">selectVesselFromPort</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#.showPortPanel">showPortPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~formatPortFullName">formatPortFullName</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~loadPortAllianceData">loadPortAllianceData</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~loadPortWeather">loadPortWeather</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~openAllianceModal">openAllianceModal</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~renderDemandSection">renderDemandSection</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~renderTypicalDemandSection">renderTypicalDemandSection</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~renderVesselList">renderVesselList</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_port-panel.html#~renderVesselsOverview">renderVesselsOverview</a></li></ul></li><li><a href="module-harbor-map_route-vessels-panel.html">harbor-map/route-vessels-panel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_route-vessels-panel.html#.closeRoutePanel">closeRoutePanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_route-vessels-panel.html#.hideRoutePanel">hideRoutePanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_route-vessels-panel.html#.selectRouteVessel">selectRouteVessel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_route-vessels-panel.html#.showRoutePanel">showRoutePanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_route-vessels-panel.html#~storeVessels">storeVessels</a></li></ul></li><li><a href="module-harbor-map_vessel-panel.html">harbor-map/vessel-panel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.closeVesselPanel">closeVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.departVessel">departVessel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.exportHistoryFormat">exportHistoryFormat</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.getCurrentVesselId">getCurrentVesselId</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.hideVesselPanel">hideVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.isLocalDepartInProgress">isLocalDepartInProgress</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.refreshOpenVesselPanel">refreshOpenVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.sellVesselFromPanel">sellVesselFromPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.showVesselPanel">showVesselPanel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.startRenameVessel">startRenameVessel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.toggleExportMenu">toggleExportMenu</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#.updateVesselPanelDepartButtons">updateVesselPanelDepartButtons</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~cancelVesselRename">cancelVesselRename</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~closeExportMenuOnClickOutside">closeExportMenuOnClickOutside</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~formatLoadingStatusText">formatLoadingStatusText</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~formatTimeRemaining">formatTimeRemaining</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~formatVesselStatus">formatVesselStatus</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~getCountryFlag">getCountryFlag</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~getLoadingStatus">getLoadingStatus</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~getPortCountryCode">getPortCountryCode</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~loadRoutePortDemands">loadRoutePortDemands</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~loadVesselHistory">loadVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~loadVesselWeather">loadVesselWeather</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~openRepairDialog">openRepairDialog</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~openVesselAppearanceEditor">openVesselAppearanceEditor</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~processDepartureQueue">processDepartureQueue</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~renderHistoryPage">renderHistoryPage</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~saveVesselRename">saveVesselRename</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~setupInfiniteScroll">setupInfiniteScroll</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~toggleParkVessel">toggleParkVessel</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~updateVesselCardName">updateVesselCardName</a></li><li data-type='method' style='display: none;'><a href="module-harbor-map_vessel-panel.html#~updateVesselNameInShipsMenu">updateVesselNameInShipsMenu</a></li></ul></li><li><a href="module-logbook.html">logbook</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-logbook.html#.deleteAllLogsConfirmed">deleteAllLogsConfirmed</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#.getLogFileSize">getLogFileSize</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#.initLogbook">initLogbook</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#.prependLogEntry">prependLogEntry</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~applyFiltersToEntries">applyFiltersToEntries</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~convertActionFilterToBackend">convertActionFilterToBackend</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~createLogEntryHTML">createLogEntryHTML</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~ensureScrollable">ensureScrollable</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~exportLogs">exportLogs</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~formatDetails">formatDetails</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~getTransactionType">getTransactionType</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~loadLogs">loadLogs</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~renderLogPage">renderLogPage</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~renderLogTable">renderLogTable</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~setupEventListeners">setupEventListeners</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~updateActionFilter">updateActionFilter</a></li><li data-type='method' style='display: none;'><a href="module-logbook.html#~updateLogCount">updateLogCount</a></li></ul></li><li><a href="module-map-icon-bar.html">map-icon-bar</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-map-icon-bar.html#.closeAllModalOverlays">closeAllModalOverlays</a></li><li data-type='method' style='display: none;'><a href="module-map-icon-bar.html#.initializeMapIconBar">initializeMapIconBar</a></li><li data-type='method' style='display: none;'><a href="module-map-icon-bar.html#~handleIconAction">handleIconAction</a></li></ul></li><li><a href="module-messenger.html">messenger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-messenger.html#.closeAllChats">closeAllChats</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#.closeChatSelection">closeChatSelection</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#.openMessenger">openMessenger</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#.openNewChat">openNewChat</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#.showAllChats">showAllChats</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#.updateUnreadBadge">updateUnreadBadge</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#~loadPrivateMessages">loadPrivateMessages</a></li><li data-type='method' style='display: none;'><a href="module-messenger.html#~stopHijackingPolling">stopHijackingPolling</a></li></ul></li><li><a href="module-public_js_modules_hijacking.html">public/js/modules/hijacking</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#.closeHijackingInbox">closeHijackingInbox</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#.openHijackingInbox">openHijackingInbox</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#.updateHijackedVesselsDisplay">updateHijackedVesselsDisplay</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#.updateHijackingBadge">updateHijackingBadge</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~deleteCase">deleteCase</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~escapeHtml">escapeHtml</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~openCaseDetails">openCaseDetails</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~refreshHijackingBadge">refreshHijackingBadge</a></li><li data-type='method' style='display: none;'><a href="module-public_js_modules_hijacking.html#~renderCaseList">renderCaseList</a></li></ul></li><li><a href="module-route-planner.html">route-planner</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-route-planner.html#.closeRoutePlanner">closeRoutePlanner</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.getPlanningVesselId">getPlanningVesselId</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.initializeRoutePlanner">initializeRoutePlanner</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.isPlanningMode">isPlanningMode</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.openRoutePlanner">openRoutePlanner</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.restorePlanningState">restorePlanningState</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#.selectPortForRoute">selectPortForRoute</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~applyDemandPortFilter">applyDemandPortFilter</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~applyPortFilter">applyPortFilter</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateFuelConsumption">calculateFuelConsumption</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateGuardsCost">calculateGuardsCost</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateHarborFeeRange">calculateHarborFeeRange</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateRemainingDemand">calculateRemainingDemand</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateRouteCreationFee">calculateRouteCreationFee</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~calculateTravelTime">calculateTravelTime</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~clearRouteSelection">clearRouteSelection</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~createRoute">createRoute</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~fetchAndDisplayDemand">fetchAndDisplayDemand</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~fetchAndSetAutoPrice">fetchAndSetAutoPrice</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~fetchRouteData">fetchRouteData</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~fetchRouteTabDemand">fetchRouteTabDemand</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~formatDemandCell">formatDemandCell</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~formatPortName">formatPortName</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~formatTravelTime">formatTravelTime</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~loadSuggestedRoute">loadSuggestedRoute</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~loadVesselPorts">loadVesselPorts</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~populateDemandDropdown">populateDemandDropdown</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~saveRouteChanges">saveRouteChanges</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~showError">showError</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~switchTab">switchTab</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateDemandDisplay">updateDemandDisplay</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updatePortsGuardsDisplay">updatePortsGuardsDisplay</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updatePortsSpeedDisplay">updatePortsSpeedDisplay</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateRouteTabDemandDisplay">updateRouteTabDemandDisplay</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateRouteTabVisibility">updateRouteTabVisibility</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateRouteTabWithCurrentRoute">updateRouteTabWithCurrentRoute</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateSelectedPortDisplay">updateSelectedPortDisplay</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateSliderDisplays">updateSliderDisplays</a></li><li data-type='method' style='display: none;'><a href="module-route-planner.html#~updateVesselCapacityDisplay">updateVesselCapacityDisplay</a></li></ul></li><li><a href="module-server_analytics_aggregator.html">server/analytics/aggregator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~aggregateRansomPayments">aggregateRansomPayments</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~calculateRouteHijackCounts">calculateRouteHijackCounts</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~calculateWeightedAverage">calculateWeightedAverage</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~fetchGameHijackingRisks">fetchGameHijackingRisks</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~filterByDays">filterByDays</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~filterByType">filterByType</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~formatRouteDisplay">formatRouteDisplay</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getActionTypes">getActionTypes</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getContributionAnalysis">getContributionAnalysis</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getDailyRevenueTrend">getDailyRevenueTrend</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getDetailedExpenses">getDetailedExpenses</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getFilteredLogs">getFilteredLogs</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getHarborFeeAnalysis">getHarborFeeAnalysis</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getMergedDepartures">getMergedDepartures</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getMergedOperationsSummary">getMergedOperationsSummary</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getMergedSummary">getMergedSummary</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getPurchaseAnalysis">getPurchaseAnalysis</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getRouteContribution">getRouteContribution</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getRouteProfitability">getRouteProfitability</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getRouteProfitabilityMerged">getRouteProfitabilityMerged</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getRouteProfitabilityWithContribution">getRouteProfitabilityWithContribution</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getVesselNameFromHijackHistory">getVesselNameFromHijackHistory</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getVesselPerformance">getVesselPerformance</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getVesselPerformanceMerged">getVesselPerformanceMerged</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getVesselPerformanceWithContribution">getVesselPerformanceWithContribution</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getVesselsByRoute">getVesselsByRoute</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~getWeeklySummary">getWeeklySummary</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~isAutopilotTransaction">isAutopilotTransaction</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~loadAuditLog">loadAuditLog</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~loadVesselHistory">loadVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~mapContextToAutopilotType">mapContextToAutopilotType</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~mapContextToCategory">mapContextToCategory</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_aggregator.html#~normalizeRouteKey">normalizeRouteKey</a></li></ul></li><li><a href="module-server_analytics_api-stats-store.html">server/analytics/api-stats-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~cleanupOldStats">cleanupOldStats</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~closeDb">closeDb</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~flushBuffer">flushBuffer</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getAvailableDates">getAvailableDates</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getCurrentMinuteKey">getCurrentMinuteKey</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getDb">getDb</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getDbPath">getDbPath</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getHourlyStats">getHourlyStats</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~migrateFromJson">migrateFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~recordCall">recordCall</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~startAutoFlush">startAutoFlush</a></li><li data-type='method' style='display: none;'><a href="module-server_analytics_api-stats-store.html#~stopAutoFlush">stopAutoFlush</a></li></ul></li><li><a href="module-server_automation.html">server/automation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_automation.html#~getRandomInterval">getRandomInterval</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~initialize">initialize</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~loadSettings">loadSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~parseInterval">parseInterval</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~restartAutoRepair">restartAutoRepair</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~runAutoRepair">runAutoRepair</a></li><li data-type='method' style='display: none;'><a href="module-server_automation.html#~scheduleAutoRepair">scheduleAutoRepair</a></li></ul></li><li><a href="module-server_autopilot.html">server/autopilot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~analyzeVesselDepartures">analyzeVesselDepartures</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~autoRebuyAll">autoRebuyAll</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~checkPriceAlerts">checkPriceAlerts</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~checkTelegramPriceAlerts">checkTelegramPriceAlerts</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~countActiveCampaignTypes">countActiveCampaignTypes</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~fastEventLoop">fastEventLoop</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~getGameIndexCached">getGameIndexCached</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~initializeAutopilotState">initializeAutopilotState</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~isAutopilotPaused">isAutopilotPaused</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~pauseAutopilot">pauseAutopilot</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~resumeAutopilot">resumeAutopilot</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~setBroadcastFunction">setBroadcastFunction</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~slowEventLoop">slowEventLoop</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~startMainEventLoop">startMainEventLoop</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~tryUpdateAllData">tryUpdateAllData</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateAllData">updateAllData</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateCampaigns">updateCampaigns</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateDrydockCount">updateDrydockCount</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updatePrices">updatePrices</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateRepairCount">updateRepairCount</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateUnreadMessages">updateUnreadMessages</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot.html#~updateVesselCount">updateVesselCount</a></li></ul></li><li><a href="module-server_autopilot_pilot_atmosphere_broker.html">server/autopilot/pilot_atmosphere_broker</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_atmosphere_broker.html#~autoRebuyCO2">autoRebuyCO2</a></li></ul></li><li><a href="module-server_autopilot_pilot_barrel_boss.html">server/autopilot/pilot_barrel_boss</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_barrel_boss.html#~autoRebuyFuel">autoRebuyFuel</a></li></ul></li><li><a href="module-server_autopilot_pilot_captain_blackbeard.html">server/autopilot/pilot_captain_blackbeard</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~autoNegotiateHijacking">autoNegotiateHijacking</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~processHijackingCase">processHijackingCase</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~wait">wait</a></li></ul></li><li><a href="module-server_autopilot_pilot_cargo_marshal.html">server/autopilot/pilot_cargo_marshal</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_cargo_marshal.html#~autoDepartVessels">autoDepartVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_cargo_marshal.html#~calculateRemainingDemand">calculateRemainingDemand</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_cargo_marshal.html#~departVessels">departVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_cargo_marshal.html#~getTotalCapacity">getTotalCapacity</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_cargo_marshal.html#~resetFuelFailedCacheIfIncreased">resetFuelFailedCacheIfIncreased</a></li></ul></li><li><a href="module-server_autopilot_pilot_drydock_master.html">server/autopilot/pilot_drydock_master</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_drydock_master.html#~autoDrydockVessels">autoDrydockVessels</a></li></ul></li><li><a href="module-server_autopilot_pilot_fair_hand.html">server/autopilot/pilot_fair_hand</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_fair_hand.html#~autoCoop">autoCoop</a></li></ul></li><li><a href="module-server_autopilot_pilot_harbormaster.html">server/autopilot/pilot_harbormaster</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_harbormaster.html#~autoAnchorPointPurchase">autoAnchorPointPurchase</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_harbormaster.html#~setBroadcastFunction">setBroadcastFunction</a></li></ul></li><li><a href="module-server_autopilot_pilot_reputation_chief.html">server/autopilot/pilot_reputation_chief</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_reputation_chief.html#~autoCampaignRenewal">autoCampaignRenewal</a></li></ul></li><li><a href="module-server_autopilot_pilot_staff_captain.html">server/autopilot/pilot_staff_captain</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_staff_captain.html#~manageStaffMorale">manageStaffMorale</a></li></ul></li><li><a href="module-server_autopilot_pilot_the_purser.html">server/autopilot/pilot_the_purser</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_the_purser.html#~autoBuyStock">autoBuyStock</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_the_purser.html#~autoSellStock">autoSellStock</a></li><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_the_purser.html#~clearPurchasedCache">clearPurchasedCache</a></li></ul></li><li><a href="module-server_autopilot_pilot_yard_foreman.html">server/autopilot/pilot_yard_foreman</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_autopilot_pilot_yard_foreman.html#~autoRepairVessels">autoRepairVessels</a></li></ul></li><li><a href="module-server_cache.html">server/cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_cache.html#~clearAllCaches">clearAllCaches</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~getAllianceCache">getAllianceCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~getCampaignCache">getCampaignCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~getCompanyCache">getCompanyCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~getCoopCache">getCoopCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~getGameIndexCache">getGameIndexCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~invalidateCampaignCache">invalidateCampaignCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~invalidateCoopCache">invalidateCoopCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~invalidateGameIndexCache">invalidateGameIndexCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~isCacheValid">isCacheValid</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~setAllianceCache">setAllianceCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~setCampaignCache">setCampaignCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~setCompanyCache">setCompanyCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~setCoopCache">setCoopCache</a></li><li data-type='method' style='display: none;'><a href="module-server_cache.html#~setGameIndexCache">setGameIndexCache</a></li></ul></li><li><a href="module-server_certificate.html">server/certificate</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~createHttpsServer">createHttpsServer</a></li><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~generateCA">generateCA</a></li><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~generateCertificate">generateCertificate</a></li><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~getNetworkIPs">getNetworkIPs</a></li><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~isCertificateInstalled">isCertificateInstalled</a></li><li data-type='method' style='display: none;'><a href="module-server_certificate.html#~loadCertificate">loadCertificate</a></li></ul></li><li><a href="module-server_chatbot.html">server/chatbot</a></li><li><a href="module-server_chatbot_commands.html">server/chatbot/commands</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~generateForecastText">generateForecastText</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~getBroadcastDir">getBroadcastDir</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~getEnabledBroadcastTemplates">getEnabledBroadcastTemplates</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~handleForecastCommand">handleForecastCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~handleHelpCommand">handleHelpCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~handleMsgCommand">handleMsgCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~handleWelcomeCommand">handleWelcomeCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~hasManagementRole">hasManagementRole</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_commands.html#~loadBroadcastTemplates">loadBroadcastTemplates</a></li></ul></li><li><a href="module-server_chatbot_executor.html">server/chatbot/executor</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_executor.html#~executeCommand">executeCommand</a></li></ul></li><li><a href="module-server_chatbot_parser.html">server/chatbot/parser</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~findCustomCommand">findCustomCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~hasManagementRole">hasManagementRole</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~isCommandAllowedInChannel">isCommandAllowedInChannel</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~processAllianceMessage">processAllianceMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~processPrivateMessage">processPrivateMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~processQueue">processQueue</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~queueCommand">queueCommand</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~resolveCommandName">resolveCommandName</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~validateCommandArguments">validateCommandArguments</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~validateForecastArguments">validateForecastArguments</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_parser.html#~validateWelcomeArguments">validateWelcomeArguments</a></li></ul></li><li><a href="module-server_chatbot_scheduler.html">server/chatbot/scheduler</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_scheduler.html#~scheduleDailyForecast">scheduleDailyForecast</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_scheduler.html#~sendDailyForecast">sendDailyForecast</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_scheduler.html#~setupScheduledTasks">setupScheduledTasks</a></li></ul></li><li><a href="module-server_chatbot_sender.html">server/chatbot/sender</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~broadcastDmFailureNotification">broadcastDmFailureNotification</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~broadcastDmQueuedNotification">broadcastDmQueuedNotification</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~broadcastRateLimitNotification">broadcastRateLimitNotification</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~getDmQueueStatus">getDmQueueStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~processDmQueue">processDmQueue</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~queuePrivateMessage">queuePrivateMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~sendAllianceMessage">sendAllianceMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~sendErrorMessage">sendErrorMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~sendPrivateMessage">sendPrivateMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~sendPrivateMessageDirect">sendPrivateMessageDirect</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_sender.html#~sendResponse">sendResponse</a></li></ul></li><li><a href="module-server_chatbot_settings.html">server/chatbot/settings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~getDefaultChatBotObject">getDefaultChatBotObject</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~hasManagementRole">hasManagementRole</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~loadSettings">loadSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~mapChatBotObjectToFlatSettings">mapChatBotObjectToFlatSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~mapSettingsToChatBotObject">mapSettingsToChatBotObject</a></li><li data-type='method' style='display: none;'><a href="module-server_chatbot_settings.html#~updateSettings">updateSettings</a></li></ul></li><li><a href="module-server_config.html">server/config</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_config.html#~getAppBaseDir">getAppBaseDir</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getAppDataDir">getAppDataDir</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getAppPlatformCookie">getAppPlatformCookie</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getAppVersionCookie">getAppVersionCookie</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getInternalBaseUrl">getInternalBaseUrl</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getLocalAppDataDir">getLocalAppDataDir</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getLogDir">getLogDir</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getSessionCookie">getSessionCookie</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~getSettingsDir">getSettingsDir</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~isPackaged">isPackaged</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~loadStartupSettings">loadStartupSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_config.html#~setSessionCookie">setSessionCookie</a></li></ul></li><li><a href="module-server_database.html">server/database</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database.html#~addToStockBlacklist">addToStockBlacklist</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~closeAccountsDb">closeAccountsDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~closeAll">closeAll</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~closeDb">closeDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~createAccountsSchema">createAccountsSchema</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~createSchema">createSchema</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~deleteAccount">deleteAccount</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~deleteRouteSettings">deleteRouteSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~ensureDbDir">ensureDbDir</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~findNextAvailablePort">findNextAvailablePort</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getAccount">getAccount</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getAccountsDb">getAccountsDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getAccountsDbPath">getAccountsDbPath</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getAllAccounts">getAllAccounts</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getAllRouteSettings">getAllRouteSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getDb">getDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getDbDir">getDbDir</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getDbPath">getDbPath</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getHijackHistoryDir">getHijackHistoryDir</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getMetadata">getMetadata</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getRouteSettings">getRouteSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~getStockBlacklist">getStockBlacklist</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~isMigrationComplete">isMigrationComplete</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~isStockBlacklisted">isStockBlacklisted</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~markMigrationComplete">markMigrationComplete</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~migrateAllHijackHistoryFromJson">migrateAllHijackHistoryFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~migrateHijackHistoryFromJson">migrateHijackHistoryFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~removeFromStockBlacklist">removeFromStockBlacklist</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~saveAccount">saveAccount</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~saveRouteSettings">saveRouteSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~setAccountAutostart">setAccountAutostart</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~setAccountPort">setAccountPort</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~setMetadata">setMetadata</a></li><li data-type='method' style='display: none;'><a href="module-server_database.html#~transaction">transaction</a></li></ul></li><li><a href="module-server_database_alliance-cache.html">server/database/alliance-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~bulkUpdate">bulkUpdate</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~clearCache">clearCache</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~closeDb">closeDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~deleteAlliance">deleteAlliance</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getAll">getAll</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getById">getById</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getCount">getCount</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getDb">getDb</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getDbPath">getDbPath</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getLastUpdate">getLastUpdate</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~getTopByContribution">getTopByContribution</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~importFromJson">importFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~search">search</a></li><li data-type='method' style='display: none;'><a href="module-server_database_alliance-cache.html#~upsertAlliance">upsertAlliance</a></li></ul></li><li><a href="module-server_database_init.html">server/database/init</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_init.html#~initAllUserDatabases">initAllUserDatabases</a></li><li data-type='method' style='display: none;'><a href="module-server_database_init.html#~initUserDatabase">initUserDatabase</a></li></ul></li><li><a href="module-server_database_json-repair.html">server/database/json-repair</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_json-repair.html#~findLastValidJsonEnd">findLastValidJsonEnd</a></li><li data-type='method' style='display: none;'><a href="module-server_database_json-repair.html#~removeBadControlChars">removeBadControlChars</a></li><li data-type='method' style='display: none;'><a href="module-server_database_json-repair.html#~repairAllUserFiles">repairAllUserFiles</a></li><li data-type='method' style='display: none;'><a href="module-server_database_json-repair.html#~repairJsonFile">repairJsonFile</a></li><li data-type='method' style='display: none;'><a href="module-server_database_json-repair.html#~repairJsonString">repairJsonString</a></li></ul></li><li><a href="module-server_database_migration.html">server/database/migration</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~findAllUsersWithData">findAllUsersWithData</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~findUserHijackFiles">findUserHijackFiles</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~findUserJsonFiles">findUserJsonFiles</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~findUserVesselAppearanceFiles">findUserVesselAppearanceFiles</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~getLegacyOlduserdataDirs">getLegacyOlduserdataDirs</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~getOlddataDir">getOlddataDir</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~getUserdataDir">getUserdataDir</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importAutopilotLog">importAutopilotLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importHijackCase">importHijackCase</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importLookup">importLookup</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importMessengerCache">importMessengerCache</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importProcessedDmMessages">importProcessedDmMessages</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importTransactions">importTransactions</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importTripData">importTripData</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importVesselAppearance">importVesselAppearance</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~importVesselHistory">importVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~migrateAll">migrateAll</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~migrateUser">migrateUser</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~moveToOldData">moveToOldData</a></li><li data-type='method' style='display: none;'><a href="module-server_database_migration.html#~safeParseJson">safeParseJson</a></li></ul></li><li><a href="module-server_database_store-adapter.html">server/database/store-adapter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_store-adapter.html#~ensureUserInitialized">ensureUserInitialized</a></li><li data-type='method' style='display: none;'><a href="module-server_database_store-adapter.html#~wrapStore">wrapStore</a></li></ul></li><li><a href="module-server_database_stores.html">server/database/stores</a></li><li><a href="module-server_database_stores_lookup-store.html">server/database/stores/lookup-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~buildLookup">buildLookup</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~buildLookupAsync">buildLookupAsync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~cancelBuild">cancelBuild</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~clearStore">clearStore</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~extractAllVesselsFromLog">extractAllVesselsFromLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~extractCashFromLog">extractCashFromLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~extractPerItemPriceFromLog">extractPerItemPriceFromLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~extractPriceFromLog">extractPriceFromLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~extractVesselFromLog">extractVesselFromLog</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getBreakdownByDay">getBreakdownByDay</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getBreakdownByType">getBreakdownByType</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getBuildStatus">getBuildStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getContextsFromAutopilot">getContextsFromAutopilot</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getEntries">getEntries</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getEntriesByDays">getEntriesByDays</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getEntryDetails">getEntryDetails</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getStoreInfo">getStoreInfo</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~getTotals">getTotals</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~loadPaged">loadPaged</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_lookup-store.html#~rematchPOD3">rematchPOD3</a></li></ul></li><li><a href="module-server_database_stores_port-demand-store.html">server/database/stores/port-demand-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~cleanupOldEntries">cleanupOldEntries</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~getLatestDemand">getLatestDemand</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~getPortHistory">getPortHistory</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~getPortTrends">getPortTrends</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~getStoreStats">getStoreStats</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_port-demand-store.html#~saveDemandSnapshot">saveDemandSnapshot</a></li></ul></li><li><a href="module-server_database_stores_transaction-store.html">server/database/stores/transaction-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~fetchFromAPI">fetchFromAPI</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~generateTransactionId">generateTransactionId</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getDailyBreakdown">getDailyBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getStoreInfo">getStoreInfo</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getTransactionSummary">getTransactionSummary</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getTransactionTypes">getTransactionTypes</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getTransactions">getTransactions</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~getTransactionsByDays">getTransactionsByDays</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~startAutoSync">startAutoSync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~stopAutoSync">stopAutoSync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_transaction-store.html#~syncTransactions">syncTransactions</a></li></ul></li><li><a href="module-server_database_stores_vessel-history-store.html">server/database/stores/vessel-history-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~clearStore">clearStore</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~fetchAllVessels">fetchAllVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~fetchVesselHistory">fetchVesselHistory</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~generateDepartureId">generateDepartureId</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getDepartures">getDepartures</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getDeparturesBefore">getDeparturesBefore</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getDeparturesByDays">getDeparturesByDays</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getRouteHijackingRisks">getRouteHijackingRisks</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getStoreInfo">getStoreInfo</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getSyncProgress">getSyncProgress</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~getVesselTrips">getVesselTrips</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~loadSyncProgress">loadSyncProgress</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~migrateTankerCargo">migrateTankerCargo</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~parseGameDate">parseGameDate</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~saveSyncProgress">saveSyncProgress</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~startAutoSync">startAutoSync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~stopAutoSync">stopAutoSync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~stopSync">stopSync</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~syncNextVesselInRotation">syncNextVesselInRotation</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~syncSpecificVessels">syncSpecificVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_database_stores_vessel-history-store.html#~syncVesselHistory">syncVesselHistory</a></li></ul></li><li><a href="module-server_gameapi.html">server/gameapi</a></li><li><a href="module-server_gameapi_alliance.html">server/gameapi/alliance</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_alliance.html#~fetchUserContribution">fetchUserContribution</a></li></ul></li><li><a href="module-server_gameapi_bunker.html">server/gameapi/bunker</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_bunker.html#~fetchBunkerState">fetchBunkerState</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_bunker.html#~fetchPrices">fetchPrices</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_bunker.html#~purchaseCO2">purchaseCO2</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_bunker.html#~purchaseFuel">purchaseFuel</a></li></ul></li><li><a href="module-server_gameapi_campaign.html">server/gameapi/campaign</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_campaign.html#~activateCampaign">activateCampaign</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_campaign.html#~fetchCampaigns">fetchCampaigns</a></li></ul></li><li><a href="module-server_gameapi_maintenance.html">server/gameapi/maintenance</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_maintenance.html#~bulkRepairVessels">bulkRepairVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_maintenance.html#~fetchRepairCount">fetchRepairCount</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_maintenance.html#~getMaintenanceCost">getMaintenanceCost</a></li></ul></li><li><a href="module-server_gameapi_port.html">server/gameapi/port</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_port.html#~fetchAssignedPorts">fetchAssignedPorts</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_port.html#~fetchAutoPrice">fetchAutoPrice</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_port.html#~getAssignedPorts">getAssignedPorts</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_port.html#~getRoutesByPorts">getRoutesByPorts</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_port.html#~getVesselPorts">getVesselPorts</a></li></ul></li><li><a href="module-server_gameapi_util.html">server/gameapi/util</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_util.html#~fetchEventData">fetchEventData</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_util.html#~fetchUnreadMessages">fetchUnreadMessages</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_util.html#~getGameIndex">getGameIndex</a></li></ul></li><li><a href="module-server_gameapi_vessel.html">server/gameapi/vessel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_gameapi_vessel.html#~departVessel">departVessel</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_vessel.html#~fetchVessels">fetchVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_vessel.html#~getAllUserVessels">getAllUserVessels</a></li><li data-type='method' style='display: none;'><a href="module-server_gameapi_vessel.html#~getVesselHistory">getVesselHistory</a></li></ul></li><li><a href="module-server_middleware_index.html">server/middleware/index</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_middleware_index.html#~setupMiddleware">setupMiddleware</a></li></ul></li><li><a href="module-server_routes_alliance.html">server/routes/alliance</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-high-scores">GET /api/alliance-high-scores</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-info">GET /api/alliance-info</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-info/:id">GET /api/alliance-info/:id</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-members">GET /api/alliance-members</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-members/:id">GET /api/alliance-members/:id</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/alliance-settings">GET /api/alliance-settings</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/chat">GET /api/chat</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.GET/api/league-info">GET /api/league-info</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/alliance-accept-user">POST /api/alliance-accept-user</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/alliance-decline-user">POST /api/alliance-decline-user</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/alliance-leave">POST /api/alliance-leave</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/alliance-queue-pool">POST /api/alliance-queue-pool</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/alliance-update-user-role">POST /api/alliance-update-user-role</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/chat/mark-read">POST /api/chat/mark-read</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/company-name">POST /api/company-name</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_alliance.html#.POST/api/send-message">POST /api/send-message</a></li></ul></li><li><a href="module-server_routes_alliance-logo.html">server/routes/alliance-logo</a></li><li><a href="module-server_routes_alliances.html">server/routes/alliances</a></li><li><a href="module-server_routes_analytics.html">server/routes/analytics</a></li><li><a href="module-server_routes_anchor.html">server/routes/anchor</a></li><li><a href="module-server_routes_broadcast.html">server/routes/broadcast</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_broadcast.html#~ensureDirectory">ensureDirectory</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_broadcast.html#~getTemplatesFilePath">getTemplatesFilePath</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_broadcast.html#~loadTemplates">loadTemplates</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_broadcast.html#~saveTemplates">saveTemplates</a></li></ul></li><li><a href="module-server_routes_coop.html">server/routes/coop</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_coop.html#.GET/api/coop/data">GET /api/coop/data</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_coop.html#.POST/api/coop/send-max">POST /api/coop/send-max</a></li></ul></li><li><a href="module-server_routes_forecast.html">server/routes/forecast</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~convertCESTToTimezone">convertCESTToTimezone</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~generateChatbotText">generateChatbotText</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~generateMetadata">generateMetadata</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getDaysInMonth">getDaysInMonth</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getForecastDataPath">getForecastDataPath</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getMonthForDay">getMonthForDay</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getNextDayData">getNextDayData</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getPreviousDayData">getPreviousDayData</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getServerLocalTimezone">getServerLocalTimezone</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getTimezoneOffsetHours">getTimezoneOffsetHours</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~getValidTimezones">getValidTimezones</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_forecast.html#~parseNumericOffset">parseNumericOffset</a></li></ul></li><li><a href="module-server_routes_game.html">server/routes/game</a></li><li><a href="module-server_routes_game_autopilot.html">server/routes/game/autopilot</a></li><li><a href="module-server_routes_game_bunker.html">server/routes/game/bunker</a></li><li><a href="module-server_routes_game_depart.html">server/routes/game/depart</a></li><li><a href="module-server_routes_game_maintenance.html">server/routes/game/maintenance</a></li><li><a href="module-server_routes_game_marketing.html">server/routes/game/marketing</a></li><li><a href="module-server_routes_game_user.html">server/routes/game/user</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_game_user.html#~compareVersions">compareVersions</a></li></ul></li><li><a href="module-server_routes_game_vessel.html">server/routes/game/vessel</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_game_vessel.html#~refreshAndBroadcastHeader">refreshAndBroadcastHeader</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_game_vessel.html#~validateImageData">validateImageData</a></li></ul></li><li><a href="module-server_routes_harbor-map.html">server/routes/harbor-map</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_harbor-map.html#~escapeCSVFormula">escapeCSVFormula</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_harbor-map.html#~formatHistoryAsTXT">formatHistoryAsTXT</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_harbor-map.html#~getGameIndexCached">getGameIndexCached</a></li></ul></li><li><a href="module-server_routes_health.html">server/routes/health</a></li><li><a href="module-server_routes_messenger.html">server/routes/messenger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.GET/api/contact/get-contacts">GET /api/contact/get-contacts</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.GET/api/hijacking/get-cases">GET /api/hijacking/get-cases</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.GET/api/messenger/get-chats">GET /api/messenger/get-chats</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.POST/api/messenger/delete-chat">POST /api/messenger/delete-chat</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.POST/api/messenger/get-messages">POST /api/messenger/get-messages</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.POST/api/messenger/send-private">POST /api/messenger/send-private</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#.POST/api/user/search">POST /api/user/search</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_messenger.html#~ensureHijackHistoryDir">ensureHijackHistoryDir</a></li></ul></li><li><a href="module-server_routes_poi.html">server/routes/poi</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~ensureCacheDir">ensureCacheDir</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~fetchAllMuseumsFromAPI">fetchAllMuseumsFromAPI</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~fetchAllWrecksFromAPI">fetchAllWrecksFromAPI</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~filterPOIsByBbox">filterPOIsByBbox</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~initializePOICache">initializePOICache</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~isCacheValid">isCacheValid</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~loadFromCache">loadFromCache</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~reduceWreckData">reduceWreckData</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~saveToCache">saveToCache</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_poi.html#~startAutomaticCacheRefresh">startAutomaticCacheRefresh</a></li></ul></li><li><a href="module-server_routes_route-planner.html">server/routes/route-planner</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_route-planner.html#~calculateRouteCreationFee">calculateRouteCreationFee</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_route-planner.html#~getRouteFeeDiscountMultiplier">getRouteFeeDiscountMultiplier</a></li></ul></li><li><a href="module-server_routes_server-config.html">server/routes/server-config</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_server-config.html#~getDirectoryStats">getDirectoryStats</a></li></ul></li><li><a href="module-server_routes_settings.html">server/routes/settings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_settings.html#.GET/api/settings">GET /api/settings</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_settings.html#.POST/api/settings">POST /api/settings</a></li></ul></li><li><a href="module-server_routes_staff.html">server/routes/staff</a></li><li><a href="module-server_routes_stock.html">server/routes/stock</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.GET/api/stock/check-company-age">GET /api/stock/check-company-age</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.GET/api/stock/finance-overview">GET /api/stock/finance-overview</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.GET/api/stock/market">GET /api/stock/market</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.GET/api/stock/purchase-times">GET /api/stock/purchase-times</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.GET/api/stock/recent-ipos">GET /api/stock/recent-ipos</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.POST/api/stock/increase-stock-for-sale">POST /api/stock/increase-stock-for-sale</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.POST/api/stock/purchase">POST /api/stock/purchase</a></li><li data-type='method' style='display: none;'><a href="module-server_routes_stock.html#.POST/api/stock/sell">POST /api/stock/sell</a></li></ul></li><li><a href="module-server_routes_transactions.html">server/routes/transactions</a></li><li><a href="module-server_routes_vessel-image.html">server/routes/vessel-image</a></li><li><a href="module-server_scheduler.html">server/scheduler</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_scheduler.html#~getInitError">getInitError</a></li><li data-type='method' style='display: none;'><a href="module-server_scheduler.html#~initScheduler">initScheduler</a></li><li data-type='method' style='display: none;'><a href="module-server_scheduler.html#~isServerReady">isServerReady</a></li></ul></li><li><a href="module-server_services_alliance-indexer.html">server/services/alliance-indexer</a></li><li><a href="module-server_services_port-demand-sync.html">server/services/port-demand-sync</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~fetchAndSavePort">fetchAndSavePort</a></li><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~getStatus">getStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~initPortCodes">initPortCodes</a></li><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~processNextBatch">processNextBatch</a></li><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~startSync">startSync</a></li><li data-type='method' style='display: none;'><a href="module-server_services_port-demand-sync.html#~stopSync">stopSync</a></li></ul></li><li><a href="module-server_settings-schema.html">server/settings-schema</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~getDefault">getDefault</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~getDefaults">getDefaults</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~getRequiredKeys">getRequiredKeys</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~getSettingsFilePath">getSettingsFilePath</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~initializeSettings">initializeSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~saveSettings">saveSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~validateSettings">validateSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_settings-schema.html#~validateValue">validateValue</a></li></ul></li><li><a href="module-server_state.html">server/state</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_state.html#~getAllLocks">getAllLocks</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getAutopilotState">getAutopilotState</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getBunkerState">getBunkerState</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getCampaignStatus">getCampaignStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getCoopData">getCoopData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getDrydockCount">getDrydockCount</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getEventData">getEventData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getHeaderData">getHeaderData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getLastCO2Alert">getLastCO2Alert</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getLastFuelAlert">getLastFuelAlert</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getLockStatus">getLockStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getPrices">getPrices</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getRepairCount">getRepairCount</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getSettings">getSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getStaffData">getStaffData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getUserState">getUserState</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~getVesselCounts">getVesselCounts</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~isAutopilotPaused">isAutopilotPaused</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~setAutopilotPaused">setAutopilotPaused</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~setAutopilotState">setAutopilotState</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~setLastCO2Alert">setLastCO2Alert</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~setLastFuelAlert">setLastFuelAlert</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~setLockStatus">setLockStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateBunkerState">updateBunkerState</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateCampaignStatus">updateCampaignStatus</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateCoopData">updateCoopData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateDrydockCount">updateDrydockCount</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateEventData">updateEventData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateHeaderData">updateHeaderData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updatePrices">updatePrices</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateRepairCount">updateRepairCount</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateSettings">updateSettings</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateStaffData">updateStaffData</a></li><li data-type='method' style='display: none;'><a href="module-server_state.html#~updateVesselCounts">updateVesselCounts</a></li></ul></li><li><a href="module-server_utils_api.html">server/utils/api</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~apiCall">apiCall</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~apiCallWithRetry">apiCallWithRetry</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~checkAndUpdateAllianceId">checkAndUpdateAllianceId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getAllianceId">getAllianceId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getAllianceName">getAllianceName</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getChatFeed">getChatFeed</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getCompanyName">getCompanyName</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getUserCompanyName">getUserCompanyName</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~getUserId">getUserId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~initializeAlliance">initializeAlliance</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~setAllianceId">setAllianceId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_api.html#~sleep">sleep</a></li></ul></li><li><a href="module-server_utils_audit-logger.html">server/utils/audit-logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_audit-logger.html#~auditLog">auditLog</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_audit-logger.html#~formatCurrency">formatCurrency</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_audit-logger.html#~formatNumber">formatNumber</a></li></ul></li><li><a href="module-server_utils_encryption.html">server/utils/encryption</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~cleanupOldCredentials">cleanupOldCredentials</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~decryptData">decryptData</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~deleteEncryptedData">deleteEncryptedData</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~encryptData">encryptData</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~getEncryptionInfo">getEncryptionInfo</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_encryption.html#~isEncrypted">isEncrypted</a></li></ul></li><li><a href="module-server_utils_fuel-calculator.html">server/utils/fuel-calculator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~calculateCO2Consumption">calculateCO2Consumption</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~calculateFuelConsumption">calculateFuelConsumption</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~calculateFuelFromFormula">calculateFuelFromFormula</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~getFuelConsumptionDisplay">getFuelConsumptionDisplay</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~getVesselCapacityForFormula">getVesselCapacityForFormula</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_fuel-calculator.html#~getVesselFuelData">getVesselFuelData</a></li></ul></li><li><a href="module-server_utils_ipo-tracker.html">server/utils/ipo-tracker</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~getHighestSeenUserId">getHighestSeenUserId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~getLegacyJsonPath">getLegacyJsonPath</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~getSeenIpoUserIds">getSeenIpoUserIds</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~hasSeenIpo">hasSeenIpo</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~initializeWithIpos">initializeWithIpos</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~isFirstCheck">isFirstCheck</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~loadIpoTracking">loadIpoTracking</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~markIpoAsSeen">markIpoAsSeen</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~migrateFromJson">migrateFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_ipo-tracker.html#~saveIpoTracking">saveIpoTracking</a></li></ul></li><li><a href="module-server_utils_logger.html">server/utils/logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~debug">debug</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~error">error</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~getUserIdPrefix">getUserIdPrefix</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~info">info</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~isDebugMode">isDebugMode</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~loadLogLevel">loadLogLevel</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_logger.html#~warn">warn</a></li></ul></li><li><a href="module-server_utils_migrate-harbor-fees.html">server/utils/migrate-harbor-fees</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_migrate-harbor-fees.html#~migrateAllHarborFees">migrateAllHarborFees</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_migrate-harbor-fees.html#~migrateHarborFeesForUser">migrateHarborFeesForUser</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_migrate-harbor-fees.html#~resolveVesselNameToId">resolveVesselNameToId</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_migrate-harbor-fees.html#~timestampToMySQLDatetime">timestampToMySQLDatetime</a></li></ul></li><li><a href="module-server_utils_read-tracker.html">server/utils/read-tracker</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_read-tracker.html#~getLastReadTimestamp">getLastReadTimestamp</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_read-tracker.html#~getLegacyJsonPath">getLegacyJsonPath</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_read-tracker.html#~migrateFromJson">migrateFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_read-tracker.html#~updateLastReadTimestamp">updateLastReadTimestamp</a></li></ul></li><li><a href="module-server_utils_session-manager.html">server/utils/session-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~deleteSession">deleteSession</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~findAvailablePort">findAvailablePort</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~getAllUserIds">getAllUserIds</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~getAvailableSessions">getAvailableSessions</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~getFirstValidSession">getFirstValidSession</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~getSession">getSession</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~hasSession">hasSession</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~isPortAvailable">isPortAvailable</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~migrateToEncrypted">migrateToEncrypted</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~migrateToNormalizedCookies">migrateToNormalizedCookies</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~normalizeCookie">normalizeCookie</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~saveSession">saveSession</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~setAutostart">setAutostart</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~setPort">setPort</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_session-manager.html#~validateSessionCookie">validateSessionCookie</a></li></ul></li><li><a href="module-server_utils_telegram.html">server/utils/telegram</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_telegram.html#~checkGreenPrices">checkGreenPrices</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_telegram.html#~sendPriceAlert">sendPriceAlert</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_telegram.html#~sendTelegramMessage">sendTelegramMessage</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_telegram.html#~testTelegramConnection">testTelegramConnection</a></li></ul></li><li><a href="module-server_utils_trip-data-store.html">server/utils/trip-data-store</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~enrichHistoryWithTripData">enrichHistoryWithTripData</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~findLookupDataFuzzy">findLookupDataFuzzy</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~findTripDataFuzzy">findTripDataFuzzy</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~getTripData">getTripData</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~migrateFromOldStores">migrateFromOldStores</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~saveHarborFee">saveHarborFee</a></li><li data-type='method' style='display: none;'><a href="module-server_utils_trip-data-store.html#~saveTripData">saveTripData</a></li></ul></li><li><a href="module-server_websocket.html">server/websocket</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket.html#~initWebSocket">initWebSocket</a></li></ul></li><li><a href="module-server_websocket_broadcaster.html">server/websocket/broadcaster</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~broadcast">broadcast</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~broadcastBunkerUpdate">broadcastBunkerUpdate</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~broadcastHarborMapRefresh">broadcastHarborMapRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~broadcastToUser">broadcastToUser</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~getWebSocketServer">getWebSocketServer</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_broadcaster.html#~setWebSocketServer">setWebSocketServer</a></li></ul></li><li><a href="module-server_websocket_chat-refresh.html">server/websocket/chat-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_chat-refresh.html#~performChatRefresh">performChatRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_chat-refresh.html#~setMessengerRefreshFn">setMessengerRefreshFn</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_chat-refresh.html#~startChatAutoRefresh">startChatAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_chat-refresh.html#~stopChatAutoRefresh">stopChatAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_chat-refresh.html#~triggerImmediateChatRefresh">triggerImmediateChatRefresh</a></li></ul></li><li><a href="module-server_websocket_hijacking-cache.html">server/websocket/hijacking-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~getCachedHijackingCase">getCachedHijackingCase</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~invalidateHijackingCase">invalidateHijackingCase</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~markCaseResolved">markCaseResolved</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~readLocalCaseFromDb">readLocalCaseFromDb</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~saveLocalCaseToDb">saveLocalCaseToDb</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~saveNegotiationEvent">saveNegotiationEvent</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-cache.html#~updateCaseVesselInfo">updateCaseVesselInfo</a></li></ul></li><li><a href="module-server_websocket_hijacking-refresh.html">server/websocket/hijacking-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-refresh.html#~performHijackingRefresh">performHijackingRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-refresh.html#~startHijackingAutoRefresh">startHijackingAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-refresh.html#~stopHijackingAutoRefresh">stopHijackingAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_hijacking-refresh.html#~triggerImmediateHijackingRefresh">triggerImmediateHijackingRefresh</a></li></ul></li><li><a href="module-server_websocket_ipo-refresh.html">server/websocket/ipo-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~getFreshIpos">getFreshIpos</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~performIpoRefresh">performIpoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~resetIpoCache">resetIpoCache</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~sendToAllianceChat">sendToAllianceChat</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~startIpoAutoRefresh">startIpoAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~stopIpoAutoRefresh">stopIpoAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_ipo-refresh.html#~triggerImmediateIpoRefresh">triggerImmediateIpoRefresh</a></li></ul></li><li><a href="module-server_websocket_message-cache.html">server/websocket/message-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~addProcessedMessageId">addProcessedMessageId</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~getLegacyJsonPath">getLegacyJsonPath</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~getProcessedMessageIds">getProcessedMessageIds</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~isMessageProcessed">isMessageProcessed</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~loadProcessedMessageCache">loadProcessedMessageCache</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~migrateFromJson">migrateFromJson</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_message-cache.html#~saveProcessedMessageCache">saveProcessedMessageCache</a></li></ul></li><li><a href="module-server_websocket_messenger-cache.html">server/websocket/messenger-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-cache.html#~getCachedMessengerChats">getCachedMessengerChats</a></li></ul></li><li><a href="module-server_websocket_messenger-content-cache.html">server/websocket/messenger-content-cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~deleteChatFromCache">deleteChatFromCache</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~getCacheStats">getCacheStats</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~getCachedChatList">getCachedChatList</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~getCachedChatMessages">getCachedChatMessages</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~hasNewMessages">hasNewMessages</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~loadChatListFromDb">loadChatListFromDb</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~loadMessengerCache">loadMessengerCache</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~markChatAsReadInCache">markChatAsReadInCache</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~updateChatList">updateChatList</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-content-cache.html#~updateChatMessages">updateChatMessages</a></li></ul></li><li><a href="module-server_websocket_messenger-refresh.html">server/websocket/messenger-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-refresh.html#~performMessengerRefresh">performMessengerRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-refresh.html#~startMessengerAutoRefresh">startMessengerAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-refresh.html#~stopMessengerAutoRefresh">stopMessengerAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_messenger-refresh.html#~triggerImmediateMessengerRefresh">triggerImmediateMessengerRefresh</a></li></ul></li><li><a href="module-server_websocket_staff-refresh.html">server/websocket/staff-refresh</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-server_websocket_staff-refresh.html#~performStaffRefresh">performStaffRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_staff-refresh.html#~startStaffAutoRefresh">startStaffAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_staff-refresh.html#~stopStaffAutoRefresh">stopStaffAutoRefresh</a></li><li data-type='method' style='display: none;'><a href="module-server_websocket_staff-refresh.html#~triggerImmediateStaffRefresh">triggerImmediateStaffRefresh</a></li></ul></li><li><a href="module-stock-manager.html">stock-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.calculatePriceStats">calculatePriceStats</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.closeStockManager">closeStockManager</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.initStockManager">initStockManager</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.initializeChart">initializeChart</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.openCompanyDetail">openCompanyDetail</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.renderChartSection">renderChartSection</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.showBuyDialog">showBuyDialog</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.showSellDialog">showSellDialog</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.showStockManager">showStockManager</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#.showStockManagerIpoAlerts">showStockManagerIpoAlerts</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~calculateMA">calculateMA</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~calculateSharePriceTier">calculateSharePriceTier</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~closeCompanyDetail">closeCompanyDetail</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~createEnhancedChart">createEnhancedChart</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~createMASeries">createMASeries</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~createMarketRow">createMarketRow</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~createTierRow">createTierRow</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~destroyChart">destroyChart</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~escapeHtml">escapeHtml</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~estimatePurchaseDateFromPrice">estimatePurchaseDateFromPrice</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~filterDataByTimeframe">filterDataByTimeframe</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~formatPurchaseDate">formatPurchaseDate</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~generateMarketRowHtml">generateMarketRowHtml</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~handleIncreaseSharesClick">handleIncreaseSharesClick</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~initTooltipSystem">initTooltipSystem</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadInvestments">loadInvestments</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadInvestors">loadInvestors</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadIpoAlerts">loadIpoAlerts</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadMarket">loadMarket</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadMarketList">loadMarketList</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadMoreMarketItems">loadMoreMarketItems</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~loadPortfolio">loadPortfolio</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~refreshIpoAlertTab">refreshIpoAlertTab</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~renderIpoAlertsTable">renderIpoAlertsTable</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~resetMarketState">resetMarketState</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupChartToolbar">setupChartToolbar</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupCompanyNameClickHandlers">setupCompanyNameClickHandlers</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupInvestmentSellButtons">setupInvestmentSellButtons</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupMarketRowClickHandlers">setupMarketRowClickHandlers</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupMarketScrollHandler">setupMarketScrollHandler</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~setupTooltips">setupTooltips</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~showIncreaseSharesModal">showIncreaseSharesModal</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~switchTab">switchTab</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~updateChart">updateChart</a></li><li data-type='method' style='display: none;'><a href="module-stock-manager.html#~updateMovingAverages">updateMovingAverages</a></li></ul></li><li><a href="module-ui-dialogs.html">ui-dialogs</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.buyCampaign">buyCampaign</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.closeCampaignsOverlay">closeCampaignsOverlay</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.closeSettings">closeSettings</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.showCampaignsOverlay">showCampaignsOverlay</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.showConfirmDialog">showConfirmDialog</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.showContactList">showContactList</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.showPurchaseDialog">showPurchaseDialog</a></li><li data-type='method' style='display: none;'><a href="module-ui-dialogs.html#.showSettings">showSettings</a></li></ul></li><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils.html#.escapeHtml">escapeHtml</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.formatCompactNumber">formatCompactNumber</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.formatNumber">formatNumber</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.getCO2PriceClass">getCO2PriceClass</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.getFuelPriceClass">getFuelPriceClass</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.isMobileDevice">isMobileDevice</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.loadBackupInfo">loadBackupInfo</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.loadServerConfig">loadServerConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.registerServiceWorker">registerServiceWorker</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.renderStars">renderStars</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.requestNotificationPermission">requestNotificationPermission</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.showNotification">showNotification</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.showSideNotification">showSideNotification</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#.toGameCode">toGameCode</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~formatFileSize">formatFileSize</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~updateHostInfo">updateHostInfo</a></li></ul></li><li><a href="module-vessel-appearance-editor.html">vessel-appearance-editor</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#.getVesselImageOnerror">getVesselImageOnerror</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#.handleVesselImageError">handleVesselImageError</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#.initVesselAppearanceEditor">initVesselAppearanceEditor</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#.openAppearanceEditor">openAppearanceEditor</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~buildSvgUrl">buildSvgUrl</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~closeAppearanceEditor">closeAppearanceEditor</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~getFormData">getFormData</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~handleImageSelection">handleImageSelection</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~handleRemoveCustomImage">handleRemoveCustomImage</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~resetColorValues">resetColorValues</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~resizeImage">resizeImage</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~saveAppearance">saveAppearance</a></li><li data-type='method' style='display: none;'><a href="module-vessel-appearance-editor.html#~updateSvgPreview">updateSvgPreview</a></li></ul></li><li><a href="module-vessel-building.html">vessel-building</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vessel-building.html#.initBuildShipModal">initBuildShipModal</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#.openBuildShipModal">openBuildShipModal</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~applyPerkEffects">applyPerkEffects</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~buildPreviewUrl">buildPreviewUrl</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~calculateBaseRangeFromCapacity">calculateBaseRangeFromCapacity</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~calculateBaseStats">calculateBaseStats</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~calculateGameBaseSpeed">calculateGameBaseSpeed</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~calculatePrice">calculatePrice</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~calculateSpeedForEngine">calculateSpeedForEngine</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~closeBuildShipModal">closeBuildShipModal</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~formatBuildTime">formatBuildTime</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~interpolate">interpolate</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~nextStep">nextStep</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~prevStep">prevStep</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~renderCurrentStep">renderCurrentStep</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~renderStep1">renderStep1</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~renderStep3">renderStep3</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~renderStep4">renderStep4</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~renderStep5">renderStep5</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~submitBuild">submitBuild</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~updateStatsPreview">updateStatsPreview</a></li><li data-type='method' style='display: none;'><a href="module-vessel-building.html#~updateSvgPreview">updateSvgPreview</a></li></ul></li><li><a href="module-vessel-management.html">vessel-management</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vessel-management.html#.departAllVessels">departAllVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#.openRepairAndDrydockDialog">openRepairAndDrydockDialog</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#.purchaseSingleVessel">purchaseSingleVessel</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#.updateLockStateFromServer">updateLockStateFromServer</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#.updateVesselCount">updateVesselCount</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~createVesselCard">createVesselCard</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~displayFilteredVessels">displayFilteredVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~executeDrydock">executeDrydock</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~getAvailableAnchorSlots">getAvailableAnchorSlots</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~getCO2EfficiencyClass">getCO2EfficiencyClass</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~getCapacityDisplay">getCapacityDisplay</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~getFuelEfficiencyClass">getFuelEfficiencyClass</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~loadCartFromStorage">loadCartFromStorage</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~loadMorePendingVessels">loadMorePendingVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~loadMoreVessels">loadMoreVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~populateDynamicFilters">populateDynamicFilters</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~renderDrydockTab">renderDrydockTab</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~renderRepairTab">renderRepairTab</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~saveCartToStorage">saveCartToStorage</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~showRepairAndDrydockDialog">showRepairAndDrydockDialog</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~updateCapacityDropdowns">updateCapacityDropdowns</a></li><li data-type='method' style='display: none;'><a href="module-vessel-management.html#~vesselPassesFilters">vesselPassesFilters</a></li></ul></li><li><a href="module-vessel-selling.html">vessel-selling</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.bulkSellVessels">bulkSellVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.closeSellVesselsOverlay">closeSellVesselsOverlay</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.openSellVesselsOverlay">openSellVesselsOverlay</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.refreshVesselsForSale">refreshVesselsForSale</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.setSellFilter">setSellFilter</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#.showSellCart">showSellCart</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~clearSellCartCache">clearSellCartCache</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~displaySellVessels">displaySellVessels</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~fetchAllSellPrices">fetchAllSellPrices</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~getCO2EfficiencyClass">getCO2EfficiencyClass</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~getCapacityDisplay">getCapacityDisplay</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~getFuelEfficiencyClass">getFuelEfficiencyClass</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~groupVesselsByModel">groupVesselsByModel</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~loadSellCartFromCache">loadSellCartFromCache</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~loadUserVesselsForSale">loadUserVesselsForSale</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~removeVesselSelectionFromCart">removeVesselSelectionFromCart</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~saveSellCartToCache">saveSellCartToCache</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~updateBulkSellButton">updateBulkSellButton</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~updateSelectButtonState">updateSelectButtonState</a></li><li data-type='method' style='display: none;'><a href="module-vessel-selling.html#~updateVesselSelectionInCart">updateVesselSelectionInCart</a></li></ul></li></ul></li><li class="nav-list-toggle"><a>Global</a><ul style="display: none;"><li><a href="global.html#buildNav">buildNav</a></li><li><a href="global.html#crypto">crypto</a></li><li><a href="global.html#deleteAllLogs">deleteAllLogs</a></li><li><a href="global.html#escapeCSVFormula">escapeCSVFormula</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#extractAllVesselsFromLog">extractAllVesselsFromLog</a></li><li><a href="global.html#extractCashFromLog">extractCashFromLog</a></li><li><a href="global.html#extractPerItemPriceFromLog">extractPerItemPriceFromLog</a></li><li><a href="global.html#extractPriceFromLog">extractPriceFromLog</a></li><li><a href="global.html#extractVesselFromLog">extractVesselFromLog</a></li><li><a href="global.html#flushAllToDisk">flushAllToDisk</a></li><li><a href="global.html#formatDetailsAsTXT">formatDetailsAsTXT</a></li><li><a href="global.html#formatFileSize">formatFileSize</a></li><li><a href="global.html#formatLogsAsCSV">formatLogsAsCSV</a></li><li><a href="global.html#formatLogsAsTXT">formatLogsAsTXT</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#generateContainerSvg">generateContainerSvg</a></li><li><a href="global.html#generateTankerSvg">generateTankerSvg</a></li><li><a href="global.html#generateVesselSvg">generateVesselSvg</a></li><li><a href="global.html#getCategoryFromAction">getCategoryFromAction</a></li><li><a href="global.html#getContextsFromAutopilot">getContextsFromAutopilot</a></li><li><a href="global.html#getLogCount">getLogCount</a></li><li><a href="global.html#getLogEntries">getLogEntries</a></li><li><a href="global.html#getLogFileSize">getLogFileSize</a></li><li><a href="global.html#getPublicBaseDir">getPublicBaseDir</a></li><li><a href="global.html#getSourceFromAction">getSourceFromAction</a></li><li><a href="global.html#getTransactionType">getTransactionType</a></li><li><a href="global.html#isContainerVessel">isContainerVessel</a></li><li><a href="global.html#isDepartInProgress">isDepartInProgress</a></li><li><a href="global.html#loadBaseContainerSvg">loadBaseContainerSvg</a></li><li><a href="global.html#loadBaseTankerSvg">loadBaseTankerSvg</a></li><li><a href="global.html#lockBulkBuyButton">lockBulkBuyButton</a></li><li><a href="global.html#lockCo2Button">lockCo2Button</a></li><li><a href="global.html#lockCoopButtons">lockCoopButtons</a></li><li><a href="global.html#lockDepartButton">lockDepartButton</a></li><li><a href="global.html#lockDrydockButton">lockDrydockButton</a></li><li><a href="global.html#lockFuelButton">lockFuelButton</a></li><li><a href="global.html#lockRepairButton">lockRepairButton</a></li><li><a href="global.html#logAutopilotAction">logAutopilotAction</a></li><li><a href="global.html#publish">publish</a></li><li><a href="global.html#searchInObject">searchInObject</a></li><li><a href="global.html#showAnchorTimer">showAnchorTimer</a></li><li><a href="global.html#shutdown">shutdown</a></li><li><a href="global.html#unlockBulkBuyButton">unlockBulkBuyButton</a></li><li><a href="global.html#unlockCo2Button">unlockCo2Button</a></li><li><a href="global.html#unlockCoopButtons">unlockCoopButtons</a></li><li><a href="global.html#unlockDepartButton">unlockDepartButton</a></li><li><a href="global.html#unlockDrydockButton">unlockDrydockButton</a></li><li><a href="global.html#unlockFuelButton">unlockFuelButton</a></li><li><a href="global.html#unlockRepairButton">unlockRepairButton</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">server/database/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview SQLite Database Core Module
 *
 * Centralized database management with automatic JSON migration.
 * Uses better-sqlite3 for synchronous, high-performance SQLite operations.
 *
 * Features:
 * - Per-user databases for data isolation
 * - Automatic schema creation and upgrades
 * - One-time JSON to SQLite migration
 * - Transaction support
 * - WAL mode for better concurrency
 *
 * @module server/database
 */

const fs = require('fs');
const path = require('path');
const logger = require('../utils/logger');
const { getAppBaseDir, isPackaged } = require('../config');

// Get native binding path for better-sqlite3
// In packaged mode, the .node file is in node_modules relative to app base dir
function getNativeBindingPath() {
  const isPkg = isPackaged();
  if (isPkg) {
    return path.join(getAppBaseDir(), 'node_modules', 'better-sqlite3', 'build', 'Release', 'better_sqlite3.node');
  }
  return undefined; // Use default resolution in development
}

const nativeBinding = getNativeBindingPath();
const Database = require('better-sqlite3');

// Database version for schema migrations
const DB_VERSION = 7;

// Accounts database version
const ACCOUNTS_DB_VERSION = 1;

// Cache of open database connections per user
const dbConnections = new Map();

// Accounts database connection (singleton)
let accountsDbConnection = null;

/**
 * Get the database directory path
 * @returns {string} Database directory path
 */
function getDbDir() {
  const isPkg = isPackaged();
  if (isPkg) {
    return path.join(getAppBaseDir(), 'userdata', 'database');
  }
  return path.join(__dirname, '..', '..', 'userdata', 'database');
}

/**
 * Get database file path for a user
 * @param {string} userId - User ID
 * @returns {string} Database file path
 */
function getDbPath(userId) {
  return path.join(getDbDir(), `${userId}.db`);
}

/**
 * Ensure database directory exists
 */
function ensureDbDir() {
  const dbDir = getDbDir();
  if (!fs.existsSync(dbDir)) {
    fs.mkdirSync(dbDir, { recursive: true });
  }
}

/**
 * Create database schema
 * @param {Database} db - SQLite database instance
 */
function createSchema(db) {
  // Enable WAL mode for better concurrency
  db.pragma('journal_mode = WAL');
  db.pragma('synchronous = NORMAL');
  db.pragma('foreign_keys = ON');

  // Metadata table for version tracking and migration state
  db.exec(`
    CREATE TABLE IF NOT EXISTS metadata (
      key TEXT PRIMARY KEY,
      value TEXT NOT NULL
    )
  `);

  // Transactions table (POD1) - Game API transactions
  db.exec(`
    CREATE TABLE IF NOT EXISTS transactions (
      id TEXT PRIMARY KEY,
      time INTEGER NOT NULL,
      context TEXT NOT NULL,
      cash INTEGER NOT NULL,
      created_at INTEGER DEFAULT (strftime('%s', 'now'))
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_transactions_time ON transactions(time)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_transactions_context ON transactions(context)`);

  // Autopilot log entries (POD2)
  db.exec(`
    CREATE TABLE IF NOT EXISTS autopilot_log (
      id TEXT PRIMARY KEY,
      timestamp INTEGER NOT NULL,
      autopilot TEXT NOT NULL,
      status TEXT NOT NULL,
      summary TEXT,
      details TEXT,
      created_at INTEGER DEFAULT (strftime('%s', 'now'))
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_autopilot_log_timestamp ON autopilot_log(timestamp)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_autopilot_log_autopilot ON autopilot_log(autopilot)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_autopilot_log_status ON autopilot_log(status)`);

  // Vessel history departures (POD3)
  db.exec(`
    CREATE TABLE IF NOT EXISTS departures (
      id TEXT PRIMARY KEY,
      timestamp INTEGER NOT NULL,
      autopilot TEXT NOT NULL,
      status TEXT NOT NULL,
      source TEXT,
      vessel_id INTEGER,
      vessel_name TEXT,
      origin TEXT,
      destination TEXT,
      route_name TEXT,
      distance INTEGER,
      fuel_used INTEGER,
      income INTEGER,
      wear REAL,
      duration INTEGER,
      cargo TEXT,
      harbor_fee INTEGER DEFAULT 0,
      contribution_gained INTEGER DEFAULT 0,
      created_at INTEGER DEFAULT (strftime('%s', 'now'))
    )
  `);

  // Add contribution_gained column if not exists (migration for existing DBs)
  try {
    db.exec('ALTER TABLE departures ADD COLUMN contribution_gained INTEGER DEFAULT 0');
  } catch {
    // Column already exists, ignore
  }
  db.exec(`CREATE INDEX IF NOT EXISTS idx_departures_timestamp ON departures(timestamp)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_departures_vessel_id ON departures(vessel_id)`);

  // Vessels metadata (synced from vessel history)
  db.exec(`
    CREATE TABLE IF NOT EXISTS vessels (
      id INTEGER PRIMARY KEY,
      name TEXT NOT NULL,
      type_name TEXT,
      last_synced_at INTEGER,
      newest_entry_at INTEGER DEFAULT 0,
      entry_count INTEGER DEFAULT 0
    )
  `);

  // Route hijacking risks
  db.exec(`
    CREATE TABLE IF NOT EXISTS route_hijack_risks (
      route_key TEXT PRIMARY KEY,
      risk REAL NOT NULL
    )
  `);

  // Lookup table (POD4) - combines POD1, POD2, POD3
  db.exec(`
    CREATE TABLE IF NOT EXISTS lookup (
      id TEXT PRIMARY KEY,
      timestamp INTEGER NOT NULL,
      pod1_id TEXT,
      pod2_id TEXT,
      pod3_id TEXT,
      pod1_timestamp INTEGER,
      pod2_timestamp INTEGER,
      pod3_timestamp INTEGER,
      pod2_vessel TEXT,
      pod3_vessel TEXT,
      cash INTEGER,
      cash_confirmed INTEGER DEFAULT 1,
      type TEXT NOT NULL,
      value TEXT NOT NULL,
      context TEXT NOT NULL
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_lookup_timestamp ON lookup(timestamp)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_lookup_type ON lookup(type)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_lookup_context ON lookup(context)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_lookup_pod1_id ON lookup(pod1_id)`);

  // Sync progress for vessel history
  db.exec(`
    CREATE TABLE IF NOT EXISTS sync_progress (
      key TEXT PRIMARY KEY,
      value TEXT NOT NULL
    )
  `);

  // API stats (time series)
  db.exec(`
    CREATE TABLE IF NOT EXISTS api_stats (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      minute_key TEXT NOT NULL,
      endpoint TEXT NOT NULL,
      count INTEGER DEFAULT 0,
      total_duration INTEGER DEFAULT 0,
      errors INTEGER DEFAULT 0,
      UNIQUE(minute_key, endpoint)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_api_stats_minute ON api_stats(minute_key)`);

  // Processed DM messages (chatbot deduplication)
  db.exec(`
    CREATE TABLE IF NOT EXISTS processed_dm_messages (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      message_id TEXT NOT NULL UNIQUE
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_processed_dm_message_id ON processed_dm_messages(message_id)`);

  // Trip data - unified store for harbor fees, contributions, departure data
  db.exec(`
    CREATE TABLE IF NOT EXISTS trip_data (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      vessel_id INTEGER NOT NULL,
      timestamp TEXT NOT NULL,
      harbor_fee INTEGER,
      contribution_gained INTEGER,
      speed REAL,
      guards INTEGER,
      co2_used REAL,
      fuel_used REAL,
      capacity INTEGER,
      utilization REAL,
      dry_rate REAL,
      ref_rate REAL,
      fuel_rate REAL,
      crude_rate REAL,
      is_drydock_operation INTEGER DEFAULT 0,
      created_at INTEGER DEFAULT (strftime('%s', 'now')),
      UNIQUE(vessel_id, timestamp)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_trip_data_vessel_id ON trip_data(vessel_id)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_trip_data_timestamp ON trip_data(timestamp)`);

  // Hijack cases - main case data
  db.exec(`
    CREATE TABLE IF NOT EXISTS hijack_cases (
      case_id INTEGER PRIMARY KEY,
      user_vessel_id INTEGER,
      vessel_name TEXT,
      danger_zone_slug TEXT,
      requested_amount INTEGER,
      paid_amount INTEGER,
      user_proposal INTEGER,
      has_negotiation INTEGER DEFAULT 0,
      round_end_time INTEGER DEFAULT 0,
      status TEXT NOT NULL,
      registered_at INTEGER,
      resolved INTEGER DEFAULT 0,
      autopilot_resolved INTEGER DEFAULT 0,
      resolved_at REAL,
      cash_before INTEGER,
      cash_after INTEGER,
      payment_verified INTEGER DEFAULT 0,
      case_details_json TEXT,
      cached_at INTEGER DEFAULT (strftime('%s', 'now') * 1000)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_hijack_cases_status ON hijack_cases(status)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_hijack_cases_resolved ON hijack_cases(resolved)`);

  // Hijack negotiation history - stores history events
  db.exec(`
    CREATE TABLE IF NOT EXISTS hijack_history (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      case_id INTEGER NOT NULL,
      type TEXT NOT NULL,
      amount REAL,
      timestamp REAL NOT NULL,
      autopilot_resolved INTEGER DEFAULT 0,
      resolved_at REAL,
      payment_verification_json TEXT,
      UNIQUE(case_id, type, timestamp)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_hijack_history_case_id ON hijack_history(case_id)`);

  // Messenger chats - chat metadata
  db.exec(`
    CREATE TABLE IF NOT EXISTS messenger_chats (
      chat_id INTEGER PRIMARY KEY,
      subject TEXT,
      is_new INTEGER DEFAULT 0,
      message_count INTEGER DEFAULT 0,
      last_message_at INTEGER,
      metadata_json TEXT,
      updated_at INTEGER DEFAULT (strftime('%s', 'now'))
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_messenger_chats_last_message ON messenger_chats(last_message_at DESC)`);

  // Messenger messages - individual messages per chat
  db.exec(`
    CREATE TABLE IF NOT EXISTS messenger_messages (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      chat_id INTEGER NOT NULL,
      body TEXT NOT NULL,
      is_mine INTEGER DEFAULT 0,
      sender_user_id INTEGER NOT NULL,
      created_at INTEGER NOT NULL,
      FOREIGN KEY (chat_id) REFERENCES messenger_chats(chat_id),
      UNIQUE(chat_id, sender_user_id, created_at)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_messenger_messages_chat_id ON messenger_messages(chat_id)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_messenger_messages_created_at ON messenger_messages(created_at)`);

  // Vessel appearances - visual customization data
  db.exec(`
    CREATE TABLE IF NOT EXISTS vessel_appearances (
      vessel_id INTEGER PRIMARY KEY,
      name TEXT,
      vessel_model TEXT,
      capacity INTEGER,
      engine_type TEXT,
      engine_kw INTEGER,
      range INTEGER,
      speed INTEGER,
      fuel_consumption INTEGER,
      antifouling_model TEXT,
      bulbous INTEGER DEFAULT 0,
      enhanced_thrusters INTEGER DEFAULT 0,
      propeller_types TEXT,
      hull_color TEXT,
      deck_color TEXT,
      bridge_color TEXT,
      container_color_1 TEXT,
      container_color_2 TEXT,
      container_color_3 TEXT,
      container_color_4 TEXT,
      name_color TEXT,
      own_image TEXT,
      updated_at INTEGER DEFAULT (strftime('%s', 'now'))
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_vessel_appearances_model ON vessel_appearances(vessel_model)`);

  // Stock blacklist - prevents autopilot from re-buying sold stocks
  db.exec(`
    CREATE TABLE IF NOT EXISTS stock_blacklist (
      stock_user_id INTEGER PRIMARY KEY,
      company_name TEXT NOT NULL,
      sold_at INTEGER NOT NULL,
      reason TEXT
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_stock_blacklist_sold_at ON stock_blacklist(sold_at)`);

  // Vessel route settings - stores preferred route settings to restore after drydock
  db.exec(`
    CREATE TABLE IF NOT EXISTS vessel_route_settings (
      vessel_id INTEGER PRIMARY KEY,
      route_id INTEGER,
      origin TEXT,
      destination TEXT,
      speed INTEGER NOT NULL,
      guards INTEGER DEFAULT 0,
      capacity_type TEXT,
      prices_dry INTEGER,
      prices_refrigerated INTEGER,
      prices_fuel INTEGER,
      prices_crude INTEGER,
      updated_at INTEGER NOT NULL
    )
  `);

  // Port demand history - tracks demand changes over time for analytics
  db.exec(`
    CREATE TABLE IF NOT EXISTS port_demand_history (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      timestamp INTEGER NOT NULL,
      port_code TEXT NOT NULL,
      port_name TEXT,
      country TEXT,
      dry_demand INTEGER DEFAULT 0,
      dry_consumed INTEGER DEFAULT 0,
      refrigerated_demand INTEGER DEFAULT 0,
      refrigerated_consumed INTEGER DEFAULT 0,
      fuel_demand INTEGER DEFAULT 0,
      fuel_consumed INTEGER DEFAULT 0,
      crude_demand INTEGER DEFAULT 0,
      crude_consumed INTEGER DEFAULT 0,
      UNIQUE(timestamp, port_code)
    )
  `);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_port_demand_history_timestamp ON port_demand_history(timestamp)`);
  db.exec(`CREATE INDEX IF NOT EXISTS idx_port_demand_history_port_code ON port_demand_history(port_code)`);

  // Add country column if not exists (migration for existing DBs)
  try {
    db.exec('ALTER TABLE port_demand_history ADD COLUMN country TEXT');
  } catch {
    // Column already exists, ignore
  }

  // Migration v6: Add UNIQUE constraint to hijack_history (case_id, type, timestamp)
  try {
    const tableExists = db.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name='hijack_history'").get();
    if (tableExists) {
      // Check if we need to migrate (look for any unique index)
      const hasCorrectUnique = db.prepare("SELECT sql FROM sqlite_master WHERE type='table' AND name='hijack_history' AND sql LIKE '%UNIQUE(case_id, type, timestamp)%'").get();
      if (!hasCorrectUnique) {
        logger.debug('[Database] Migrating hijack_history to add UNIQUE(case_id, type, timestamp)...');
        db.exec(`
          CREATE TABLE IF NOT EXISTS hijack_history_new (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            case_id INTEGER NOT NULL,
            type TEXT NOT NULL,
            amount REAL,
            timestamp REAL NOT NULL,
            autopilot_resolved INTEGER DEFAULT 0,
            resolved_at REAL,
            payment_verification_json TEXT,
            UNIQUE(case_id, type, timestamp)
          )
        `);
        db.exec('INSERT OR IGNORE INTO hijack_history_new (case_id, type, amount, timestamp, autopilot_resolved, resolved_at, payment_verification_json) SELECT case_id, type, amount, timestamp, autopilot_resolved, resolved_at, payment_verification_json FROM hijack_history');
        db.exec('DROP TABLE hijack_history');
        db.exec('ALTER TABLE hijack_history_new RENAME TO hijack_history');
        db.exec('CREATE INDEX IF NOT EXISTS idx_hijack_history_case_id ON hijack_history(case_id)');
        logger.debug('[Database] hijack_history migration complete');
      }
    }
  } catch (err) {
    logger.error('[Database] Failed to migrate hijack_history:', err.message);
  }

  // Set database version
  const setVersion = db.prepare('INSERT OR REPLACE INTO metadata (key, value) VALUES (?, ?)');
  setVersion.run('db_version', String(DB_VERSION));
}

/**
 * Get or create database connection for a user
 * @param {string} userId - User ID
 * @returns {Database} SQLite database instance
 */
function getDb(userId) {
  if (dbConnections.has(userId)) {
    return dbConnections.get(userId);
  }

  ensureDbDir();
  const dbPath = getDbPath(userId);
  const isNew = !fs.existsSync(dbPath);

  // Pass nativeBinding option for packaged mode
  const dbOptions = nativeBinding ? { nativeBinding } : {};
  const db = new Database(dbPath, dbOptions);
  createSchema(db);

  if (isNew) {
    logger.info(`[Database] Created new database for user ${userId}`);
  }

  dbConnections.set(userId, db);
  return db;
}

/**
 * Close database connection for a user
 * @param {string} userId - User ID
 */
function closeDb(userId) {
  if (dbConnections.has(userId)) {
    const db = dbConnections.get(userId);
    db.close();
    dbConnections.delete(userId);
    logger.debug(`[Database] Closed database for user ${userId}`);
  }
}

/**
 * Close all database connections
 */
function closeAll() {
  for (const [userId, db] of dbConnections) {
    try {
      db.close();
    } catch (err) {
      logger.error(`[Database] Error closing database for user ${userId}:`, err);
    }
  }
  dbConnections.clear();
  logger.info('[Database] All connections closed');
}

/**
 * Check if migration from JSON has been completed
 * @param {string} userId - User ID
 * @returns {boolean} True if migration is complete
 */
function isMigrationComplete(userId) {
  const db = getDb(userId);
  const row = db.prepare('SELECT value FROM metadata WHERE key = ?').get('json_migration_complete');
  return row &amp;&amp; row.value === 'true';
}

/**
 * Mark migration as complete
 * @param {string} userId - User ID
 */
function markMigrationComplete(userId) {
  const db = getDb(userId);
  db.prepare('INSERT OR REPLACE INTO metadata (key, value) VALUES (?, ?)').run('json_migration_complete', 'true');
  logger.info(`[Database] Migration marked complete for user ${userId}`);
}

/**
 * Get metadata value
 * @param {string} userId - User ID
 * @param {string} key - Metadata key
 * @returns {string|null} Value or null
 */
function getMetadata(userId, key) {
  const db = getDb(userId);
  const row = db.prepare('SELECT value FROM metadata WHERE key = ?').get(key);
  return row ? row.value : null;
}

/**
 * Set metadata value
 * @param {string} userId - User ID
 * @param {string} key - Metadata key
 * @param {string} value - Value to set
 */
function setMetadata(userId, key, value) {
  const db = getDb(userId);
  db.prepare('INSERT OR REPLACE INTO metadata (key, value) VALUES (?, ?)').run(key, value);
}

/**
 * Run a function within a transaction
 * @param {string} userId - User ID
 * @param {Function} fn - Function to run
 * @returns {*} Return value of fn
 */
function transaction(userId, fn) {
  const db = getDb(userId);
  return db.transaction(fn)();
}

/**
 * Get the hijack history directory path
 * @returns {string} Hijack history directory path
 */
function getHijackHistoryDir() {
  const isPkg = isPackaged();
  if (isPkg) {
    return path.join(getAppBaseDir(), 'userdata', 'hijack_history');
  }
  return path.join(__dirname, '..', '..', 'userdata', 'hijack_history');
}

/**
 * Migrate hijack history from JSON files to SQLite
 * - Reads all JSON files from userdata/hijack_history/
 * - Migrates history entries to hijack_history table
 * - Migrates case metadata to hijack_cases table
 * - Deletes JSON files after successful migration
 *
 * @param {string} userId - User ID to migrate for
 * @returns {{migrated: number, deleted: number, errors: string[]}} Migration results
 */
function migrateHijackHistoryFromJson(userId) {
  const results = { migrated: 0, deleted: 0, errors: [] };
  const hijackDir = getHijackHistoryDir();

  // Check if directory exists
  if (!fs.existsSync(hijackDir)) {
    logger.debug('[Database] No hijack_history directory found - nothing to migrate');
    return results;
  }

  // Find all JSON files for this user
  const files = fs.readdirSync(hijackDir).filter(f => f.startsWith(`${userId}-`) &amp;&amp; f.endsWith('.json'));

  if (files.length === 0) {
    logger.debug(`[Database] No hijack history JSON files found for user ${userId}`);
    return results;
  }

  logger.info(`[Database] Found ${files.length} hijack history JSON files to migrate for user ${userId}`);
  const db = getDb(userId);

  for (const filename of files) {
    const filePath = path.join(hijackDir, filename);

    try {
      // Parse filename to get case ID: {userId}-{caseId}.json
      const match = filename.match(/^\d+-(\d+)\.json$/);
      if (!match) {
        results.errors.push(`Invalid filename format: ${filename}`);
        continue;
      }
      const caseId = parseInt(match[1], 10);

      // Read JSON file
      const content = fs.readFileSync(filePath, 'utf8');
      const data = JSON.parse(content);

      // Check if already migrated in database
      const existing = db.prepare('SELECT case_id FROM hijack_cases WHERE case_id = ?').get(caseId);
      const existingHistoryCount = db.prepare('SELECT COUNT(*) as count FROM hijack_history WHERE case_id = ?').get(caseId);

      // Only migrate if we have more history in JSON than in DB
      if (existing &amp;&amp; existingHistoryCount.count >= (data.history?.length || 0)) {
        logger.debug(`[Database] Case ${caseId} already fully migrated (${existingHistoryCount.count} entries) - deleting JSON`);
        fs.unlinkSync(filePath);
        results.deleted++;
        continue;
      }

      // Start transaction for this case
      db.transaction(() => {
        // Insert/update hijack_cases
        db.prepare(`
          INSERT INTO hijack_cases (
            case_id, user_vessel_id, vessel_name, status, resolved, autopilot_resolved,
            resolved_at, paid_amount, cash_before, cash_after, payment_verified, cached_at
          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
          ON CONFLICT(case_id) DO UPDATE SET
            user_vessel_id = COALESCE(excluded.user_vessel_id, hijack_cases.user_vessel_id),
            vessel_name = COALESCE(excluded.vessel_name, hijack_cases.vessel_name),
            status = excluded.status,
            resolved = MAX(excluded.resolved, hijack_cases.resolved),
            autopilot_resolved = MAX(excluded.autopilot_resolved, hijack_cases.autopilot_resolved),
            resolved_at = COALESCE(excluded.resolved_at, hijack_cases.resolved_at),
            paid_amount = COALESCE(excluded.paid_amount, hijack_cases.paid_amount),
            cash_before = COALESCE(excluded.cash_before, hijack_cases.cash_before),
            cash_after = COALESCE(excluded.cash_after, hijack_cases.cash_after),
            payment_verified = COALESCE(excluded.payment_verified, hijack_cases.payment_verified)
        `).run(
          caseId,
          data.user_vessel_id,
          data.vessel_name,
          data.final_status || (data.resolved ? 'paid' : 'open'),
          data.resolved ? 1 : 0,
          data.autopilot_resolved ? 1 : 0,
          data.resolved_at,
          data.payment_verification?.actual_paid,
          data.payment_verification?.cash_before,
          data.payment_verification?.cash_after,
          data.payment_verification?.verified ? 1 : 0,
          Date.now()
        );

        // Insert history entries
        if (data.history &amp;&amp; Array.isArray(data.history)) {
          const insertHistory = db.prepare(`
            INSERT OR IGNORE INTO hijack_history (case_id, type, amount, timestamp)
            VALUES (?, ?, ?, ?)
          `);

          for (const entry of data.history) {
            insertHistory.run(caseId, entry.type, entry.amount, entry.timestamp);
          }
        }
      })();

      logger.info(`[Database] Migrated case ${caseId} from JSON (${data.history?.length || 0} history entries)`);
      results.migrated++;

      // Delete JSON file after successful migration
      fs.unlinkSync(filePath);
      results.deleted++;
      logger.debug(`[Database] Deleted JSON file: ${filename}`);

    } catch (error) {
      results.errors.push(`Error migrating ${filename}: ${error.message}`);
      logger.error(`[Database] Failed to migrate ${filename}:`, error.message);
    }
  }

  logger.info(`[Database] Hijack history migration complete: ${results.migrated} migrated, ${results.deleted} deleted, ${results.errors.length} errors`);
  return results;
}

/**
 * Migrate all users' hijack history from JSON to SQLite
 * Scans hijack_history directory and migrates all files
 * @returns {{users: Object&lt;string, {migrated: number, deleted: number, errors: string[]}>}} Results per user
 */
function migrateAllHijackHistoryFromJson() {
  const results = {};
  const hijackDir = getHijackHistoryDir();

  if (!fs.existsSync(hijackDir)) {
    logger.debug('[Database] No hijack_history directory found - nothing to migrate');
    return results;
  }

  // Find all JSON files and group by user
  const files = fs.readdirSync(hijackDir).filter(f => f.endsWith('.json'));
  const userIds = new Set();

  for (const filename of files) {
    const match = filename.match(/^(\d+)-\d+\.json$/);
    if (match) {
      userIds.add(match[1]);
    }
  }

  logger.info(`[Database] Found ${userIds.size} users with hijack history to migrate`);

  for (const userId of userIds) {
    results[userId] = migrateHijackHistoryFromJson(userId);
  }

  return results;
}

// Graceful shutdown
process.on('SIGINT', closeAll);
process.on('SIGTERM', closeAll);


// ============================================================================
// ACCOUNTS DATABASE - Central storage for all user accounts
// ============================================================================

/**
 * Get path to accounts database
 * @returns {string} Path to accounts.db
 */
function getAccountsDbPath() {
  return path.join(getDbDir(), 'accounts.db');
}

/**
 * Create accounts database schema
 * @param {Database} db - SQLite database instance
 */
function createAccountsSchema(db) {
  db.pragma('journal_mode = WAL');
  db.pragma('synchronous = NORMAL');

  db.exec(`
    CREATE TABLE IF NOT EXISTS accounts (
      user_id TEXT PRIMARY KEY,
      company_name TEXT NOT NULL,
      cookie TEXT NOT NULL,
      login_method TEXT NOT NULL,
      port INTEGER NOT NULL,
      autostart INTEGER DEFAULT 1,
      timestamp INTEGER NOT NULL,
      last_updated TEXT
    )
  `);

  db.exec(`
    CREATE TABLE IF NOT EXISTS accounts_metadata (
      key TEXT PRIMARY KEY,
      value TEXT NOT NULL
    )
  `);

  // Set version
  db.prepare('INSERT OR REPLACE INTO accounts_metadata (key, value) VALUES (?, ?)').run('db_version', String(ACCOUNTS_DB_VERSION));
}

/**
 * Get accounts database connection (singleton)
 * @returns {Database} SQLite database instance
 */
function getAccountsDb() {
  if (accountsDbConnection) {
    return accountsDbConnection;
  }

  ensureDbDir();
  const dbPath = getAccountsDbPath();
  const isNew = !fs.existsSync(dbPath);

  const options = { fileMustExist: false };
  if (nativeBinding) options.nativeBinding = nativeBinding;

  accountsDbConnection = new Database(dbPath, options);

  if (isNew) {
    logger.info('[Database] Creating new accounts database');
    createAccountsSchema(accountsDbConnection);
  }

  return accountsDbConnection;
}

/**
 * Get all accounts from database
 * @returns {Array} Array of account objects
 */
function getAllAccounts() {
  const db = getAccountsDb();
  const rows = db.prepare('SELECT * FROM accounts ORDER BY timestamp DESC').all();
  return rows.map(row => ({
    userId: row.user_id,
    companyName: row.company_name,
    cookie: row.cookie,
    loginMethod: row.login_method,
    port: row.port,
    autostart: row.autostart === 1,
    timestamp: row.timestamp,
    lastUpdated: row.last_updated
  }));
}

/**
 * Get a single account by user ID
 * @param {string} userId - User ID
 * @returns {object|null} Account object or null
 */
function getAccount(userId) {
  const db = getAccountsDb();
  const row = db.prepare('SELECT * FROM accounts WHERE user_id = ?').get(String(userId));
  if (!row) return null;
  return {
    userId: row.user_id,
    companyName: row.company_name,
    cookie: row.cookie,
    loginMethod: row.login_method,
    port: row.port,
    autostart: row.autostart === 1,
    timestamp: row.timestamp,
    lastUpdated: row.last_updated
  };
}

/**
 * Save or update an account
 * @param {string} userId - User ID
 * @param {object} data - Account data
 */
function saveAccount(userId, data) {
  const db = getAccountsDb();
  db.prepare(`
    INSERT INTO accounts (user_id, company_name, cookie, login_method, port, autostart, timestamp, last_updated)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    ON CONFLICT(user_id) DO UPDATE SET
      company_name = excluded.company_name,
      cookie = excluded.cookie,
      login_method = excluded.login_method,
      port = excluded.port,
      autostart = excluded.autostart,
      timestamp = excluded.timestamp,
      last_updated = excluded.last_updated
  `).run(
    String(userId),
    data.companyName,
    data.cookie,
    data.loginMethod,
    data.port,
    data.autostart !== false ? 1 : 0,
    data.timestamp || Math.floor(Date.now() / 1000),
    data.lastUpdated || new Date().toISOString()
  );
  logger.info(`[Database] Saved account ${userId} (${data.companyName}) on port ${data.port}`);
}

/**
 * Update account port
 * @param {string} userId - User ID
 * @param {number} port - New port
 */
function setAccountPort(userId, port) {
  const db = getAccountsDb();
  const result = db.prepare('UPDATE accounts SET port = ?, last_updated = ? WHERE user_id = ?')
    .run(port, new Date().toISOString(), String(userId));
  if (result.changes > 0) {
    logger.info(`[Database] Updated port for ${userId} to ${port}`);
  }
  return result.changes > 0;
}

/**
 * Update account autostart setting
 * @param {string} userId - User ID
 * @param {boolean} autostart - Autostart enabled
 */
function setAccountAutostart(userId, autostart) {
  const db = getAccountsDb();
  const result = db.prepare('UPDATE accounts SET autostart = ?, last_updated = ? WHERE user_id = ?')
    .run(autostart ? 1 : 0, new Date().toISOString(), String(userId));
  return result.changes > 0;
}

/**
 * Delete an account
 * @param {string} userId - User ID
 */
function deleteAccount(userId) {
  const db = getAccountsDb();
  const result = db.prepare('DELETE FROM accounts WHERE user_id = ?').run(String(userId));
  if (result.changes > 0) {
    logger.info(`[Database] Deleted account ${userId}`);
  }
  return result.changes > 0;
}

/**
 * Find next available port starting from basePort
 * @param {number} basePort - Starting port
 * @returns {number} Next available port
 */
function findNextAvailablePort(basePort) {
  const db = getAccountsDb();
  const usedPorts = db.prepare('SELECT port FROM accounts ORDER BY port').all().map(r => r.port);
  
  let port = basePort;
  while (usedPorts.includes(port)) {
    port++;
  }
  return port;
}

/**
 * Close accounts database connection
 */
function closeAccountsDb() {
  if (accountsDbConnection) {
    accountsDbConnection.close();
    accountsDbConnection = null;
    logger.debug('[Database] Closed accounts database');
  }
}


// ============================================================================
// STOCK BLACKLIST - Prevents autopilot from re-buying sold stocks
// ============================================================================

/**
 * Add a stock to the blacklist (prevent auto-buy)
 * @param {string} userId - User ID
 * @param {number} stockUserId - Stock issuer's user ID
 * @param {string} companyName - Company name
 * @param {string} reason - Reason for blacklisting (e.g., 'manual_sell', 'auto_sell')
 */
function addToStockBlacklist(userId, stockUserId, companyName, reason = 'sold') {
  const db = getDb(userId);
  db.prepare(`
    INSERT OR REPLACE INTO stock_blacklist (stock_user_id, company_name, sold_at, reason)
    VALUES (?, ?, ?, ?)
  `).run(stockUserId, companyName, Date.now(), reason);
  logger.info(`[Database] Added ${companyName} (${stockUserId}) to stock blacklist: ${reason}`);
}

/**
 * Check if a stock is blacklisted
 * @param {string} userId - User ID
 * @param {number} stockUserId - Stock issuer's user ID
 * @returns {boolean} True if blacklisted
 */
function isStockBlacklisted(userId, stockUserId) {
  const db = getDb(userId);
  const row = db.prepare('SELECT 1 FROM stock_blacklist WHERE stock_user_id = ?').get(stockUserId);
  return !!row;
}

/**
 * Get all blacklisted stocks
 * @param {string} userId - User ID
 * @returns {Array} Array of blacklisted stocks
 */
function getStockBlacklist(userId) {
  const db = getDb(userId);
  return db.prepare('SELECT * FROM stock_blacklist ORDER BY sold_at DESC').all();
}

/**
 * Remove a stock from the blacklist
 * @param {string} userId - User ID
 * @param {number} stockUserId - Stock issuer's user ID
 * @returns {boolean} True if removed
 */
function removeFromStockBlacklist(userId, stockUserId) {
  const db = getDb(userId);
  const result = db.prepare('DELETE FROM stock_blacklist WHERE stock_user_id = ?').run(stockUserId);
  if (result.changes > 0) {
    logger.info(`[Database] Removed stock ${stockUserId} from blacklist`);
  }
  return result.changes > 0;
}

// ============================================
// VESSEL ROUTE SETTINGS
// ============================================

/**
 * Save or update vessel route settings
 * @param {string} userId - User ID
 * @param {Object} settings - Route settings object
 * @param {number} settings.vesselId - Vessel ID
 * @param {number} settings.routeId - Route ID
 * @param {string} settings.origin - Origin port code
 * @param {string} settings.destination - Destination port code
 * @param {number} settings.speed - Route speed
 * @param {number} settings.guards - Number of guards
 * @param {string} settings.capacityType - 'container' or 'tanker'
 * @param {Object} settings.prices - Prices object
 */
function saveRouteSettings(userId, settings) {
  const db = getDb(userId);
  const {
    vesselId, routeId, origin, destination, speed, guards,
    capacityType, prices
  } = settings;

  logger.debug(`[Database] saveRouteSettings input: vesselId=${vesselId}, routeId=${routeId}, prices=${JSON.stringify(prices)}`);

  db.prepare(`
    INSERT OR REPLACE INTO vessel_route_settings
    (vessel_id, route_id, origin, destination, speed, guards, capacity_type,
     prices_dry, prices_refrigerated, prices_fuel, prices_crude, updated_at)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  `).run(
    vesselId,
    routeId,
    origin,
    destination,
    speed,
    guards,
    capacityType,
    prices?.dry,
    prices?.refrigerated,
    prices?.fuel,
    prices?.crude_oil,
    Date.now()
  );

  logger.info(`[Database] Saved route settings for vessel ${vesselId}: speed=${speed}, guards=${guards}, prices_dry=${prices?.dry}, prices_ref=${prices?.refrigerated}`);
}

/**
 * Get route settings for a vessel
 * @param {string} userId - User ID
 * @param {number} vesselId - Vessel ID
 * @returns {Object|null} Route settings or null if not found
 */
function getRouteSettings(userId, vesselId) {
  const db = getDb(userId);
  const row = db.prepare('SELECT * FROM vessel_route_settings WHERE vessel_id = ?').get(vesselId);

  if (!row) return null;

  return {
    vesselId: row.vessel_id,
    routeId: row.route_id,
    origin: row.origin,
    destination: row.destination,
    speed: row.speed,
    guards: row.guards,
    capacityType: row.capacity_type,
    prices: {
      dry: row.prices_dry,
      refrigerated: row.prices_refrigerated,
      fuel: row.prices_fuel,
      crude_oil: row.prices_crude
    },
    updatedAt: row.updated_at
  };
}

/**
 * Delete route settings for a vessel (e.g., when route is removed)
 * @param {string} userId - User ID
 * @param {number} vesselId - Vessel ID
 * @returns {boolean} True if deleted
 */
function deleteRouteSettings(userId, vesselId) {
  const db = getDb(userId);
  const result = db.prepare('DELETE FROM vessel_route_settings WHERE vessel_id = ?').run(vesselId);
  if (result.changes > 0) {
    logger.info(`[Database] Deleted route settings for vessel ${vesselId}`);
  }
  return result.changes > 0;
}

/**
 * Get all route settings for a user
 * @param {string} userId - User ID
 * @returns {Array} Array of route settings
 */
function getAllRouteSettings(userId) {
  const db = getDb(userId);
  const rows = db.prepare('SELECT * FROM vessel_route_settings ORDER BY updated_at DESC').all();

  return rows.map(row => ({
    vesselId: row.vessel_id,
    routeId: row.route_id,
    origin: row.origin,
    destination: row.destination,
    speed: row.speed,
    guards: row.guards,
    capacityType: row.capacity_type,
    prices: {
      dry: row.prices_dry,
      refrigerated: row.prices_refrigerated,
      fuel: row.prices_fuel,
      crude_oil: row.prices_crude
    },
    updatedAt: row.updated_at
  }));
}

module.exports = {
  getDb,
  closeDb,
  closeAll,
  isMigrationComplete,
  markMigrationComplete,
  getMetadata,
  setMetadata,
  transaction,
  getDbPath,
  getDbDir,
  DB_VERSION,
  migrateHijackHistoryFromJson,
  migrateAllHijackHistoryFromJson,
  // Accounts database
  getAccountsDb,
  getAllAccounts,
  getAccount,
  saveAccount,
  setAccountPort,
  setAccountAutostart,
  deleteAccount,
  findNextAvailablePort,
  closeAccountsDb,
  // Stock blacklist
  addToStockBlacklist,
  isStockBlacklisted,
  getStockBlacklist,
  removeFromStockBlacklist,
  // Vessel route settings
  saveRouteSettings,
  getRouteSettings,
  deleteRouteSettings,
  getAllRouteSettings
};
</code></pre>
        </article>
    </section>





    
</div>

<br class="clear">

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

</body>
</html>
